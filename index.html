
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
      <link href="images/navbar.png" rel="icon" type="image/png" />
    <title>MARKET Protocol</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
    <link href="https://fonts.googleapis.com/css?family=Work+Sans:400,500&amp;subset=latin-ext" rel="stylesheet">
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;solidity&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/market-logo.png" class="logo" alt="Market logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="solidity">solidity</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="introduction">Introduction</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#documentation" class="toc-h2 toc-link" data-title="documentation">Documentation</a>
                  </li>
                  <li>
                    <a href="#frequently-asked-questions" class="toc-h2 toc-link" data-title="frequently-asked-questions">Frequently Asked Questions</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#dapp" class="toc-h1 toc-link" data-title="dapp">dApp</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#using-an-ethereum-enabled-browser" class="toc-h2 toc-link" data-title="using-an-ethereum-enabled-browser">Using an Ethereum-enabled browser</a>
                  </li>
                  <li>
                    <a href="#acquire-test-eth" class="toc-h2 toc-link" data-title="acquire-test-eth">Acquire Test ETH</a>
                  </li>
                  <li>
                    <a href="#contract-deployment" class="toc-h2 toc-link" data-title="contract-deployment">Contract Deployment</a>
                  </li>
                  <li>
                    <a href="#explore-contracts" class="toc-h2 toc-link" data-title="explore-contracts">Explore Contracts</a>
                  </li>
                  <li>
                    <a href="#find-contracts" class="toc-h2 toc-link" data-title="find-contracts">Find Contracts</a>
                  </li>
                  <li>
                    <a href="#test-query" class="toc-h2 toc-link" data-title="test-query">Test Query</a>
                  </li>
                  <li>
                    <a href="#simulated-exchange" class="toc-h2 toc-link" data-title="simulated-exchange">Simulated Exchange</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#api" class="toc-h1 toc-link" data-title="api">API</a>
          </li>
          <li>
            <a href="#solidity-smart-contracts" class="toc-h1 toc-link" data-title="solidity-smart-contracts">Solidity Smart Contracts</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#market-contract" class="toc-h2 toc-link" data-title="market-contract">Market Contract</a>
                  </li>
                  <li>
                    <a href="#market-contract-oraclize" class="toc-h2 toc-link" data-title="market-contract-oraclize">Market Contract Oraclize</a>
                  </li>
                  <li>
                    <a href="#market-collateral-pool" class="toc-h2 toc-link" data-title="market-collateral-pool">Market Collateral Pool</a>
                  </li>
                  <li>
                    <a href="#orders" class="toc-h2 toc-link" data-title="orders">Orders</a>
                  </li>
                  <li>
                    <a href="#trading" class="toc-h2 toc-link" data-title="trading">Trading</a>
                  </li>
                  <li>
                    <a href="#market-contract-registry" class="toc-h2 toc-link" data-title="market-contract-registry">Market Contract Registry</a>
                  </li>
                  <li>
                    <a href="#mkt-tokens" class="toc-h2 toc-link" data-title="mkt-tokens">MKT Tokens</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#faq-general" class="toc-h1 toc-link" data-title="faq-general">FAQ - General</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#what-is-a-derivative" class="toc-h2 toc-link" data-title="what-is-a-derivative">What is a derivative?</a>
                  </li>
                  <li>
                    <a href="#are-you-a-decentralized-exchange" class="toc-h2 toc-link" data-title="are-you-a-decentralized-exchange">Are you a decentralized exchange?</a>
                  </li>
                  <li>
                    <a href="#who-will-host-market-39-s-order-books" class="toc-h2 toc-link" data-title="who-will-host-market-s-order-books">Who will host MARKET's order books?</a>
                  </li>
                  <li>
                    <a href="#does-market-charge-a-fee-to-use-the-protocol" class="toc-h2 toc-link" data-title="does-market-charge-a-fee-to-use-the-protocol">Does MARKET charge a fee to use the protocol?</a>
                  </li>
                  <li>
                    <a href="#how-is-the-needed-collateral-for-an-open-position-calculated" class="toc-h2 toc-link" data-title="how-is-the-needed-collateral-for-an-open-position-calculated">How is the needed collateral for an open position calculated?</a>
                  </li>
                  <li>
                    <a href="#if-i-want-to-open-a-short-position-do-i-need-to-borrow-the-asset" class="toc-h2 toc-link" data-title="if-i-want-to-open-a-short-position-do-i-need-to-borrow-the-asset">If I want to open a short position do I need to borrow the asset?</a>
                  </li>
                  <li>
                    <a href="#when-is-my-collateral-returned-to-me-and-able-to-be-withdrawn" class="toc-h2 toc-link" data-title="when-is-my-collateral-returned-to-me-and-able-to-be-withdrawn">When is my collateral returned to me and able to be withdrawn?</a>
                  </li>
                  <li>
                    <a href="#what-happens-if-i-hold-an-open-position-through-contract-expiration" class="toc-h2 toc-link" data-title="what-happens-if-i-hold-an-open-position-through-contract-expiration">What happens if I hold an open position through contract expiration?</a>
                  </li>
                  <li>
                    <a href="#when-i-trade-out-of-an-open-position-how-is-my-profit-or-loss-allocated" class="toc-h2 toc-link" data-title="when-i-trade-out-of-an-open-position-how-is-my-profit-or-loss-allocated">When I trade out of an open position, how is my profit or loss allocated?</a>
                  </li>
                  <li>
                    <a href="#can-a-contract-be-created-based-on-a-different-blockhain-or-off-chain-asset" class="toc-h2 toc-link" data-title="can-a-contract-be-created-based-on-a-different-blockhain-or-off-chain-asset">Can a contract be created based on a different blockhain or off chain asset?</a>
                  </li>
                  <li>
                    <a href="#do-you-have-a-white-paper-available" class="toc-h2 toc-link" data-title="do-you-have-a-white-paper-available">Do you have a white paper available?</a>
                  </li>
                  <li>
                    <a href="#how-will-disputes-be-resolved" class="toc-h2 toc-link" data-title="how-will-disputes-be-resolved">How will disputes be resolved?</a>
                  </li>
                  <li>
                    <a href="#how-do-i-get-involved" class="toc-h2 toc-link" data-title="how-do-i-get-involved">How do I get involved?</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#faq-solidity-smart-contracts" class="toc-h1 toc-link" data-title="faq-solidity-smart-contracts">FAQ - Solidity Smart Contracts</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#how-to-debug-market-protocol-tests" class="toc-h2 toc-link" data-title="how-to-debug-market-protocol-tests">How to debug MARKET Protocol tests?</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#faq-api" class="toc-h1 toc-link" data-title="faq-api">FAQ - API</a>
          </li>
          <li>
            <a href="#faq-dapp" class="toc-h1 toc-link" data-title="faq-dapp">FAQ - dApp</a>
          </li>
          <li>
            <a href="#getting-help" class="toc-h1 toc-link" data-title="getting-help">Getting help</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#discord" class="toc-h2 toc-link" data-title="discord">Discord</a>
                  </li>
                  <li>
                    <a href="#email" class="toc-h2 toc-link" data-title="email">Email</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#contributing" class="toc-h1 toc-link" data-title="contributing">Contributing</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#dive-right-in" class="toc-h2 toc-link" data-title="dive-right-in">Dive Right In</a>
                  </li>
                  <li>
                    <a href="#development-process" class="toc-h2 toc-link" data-title="development-process">Development Process</a>
                  </li>
                  <li>
                    <a href="#gitcoin-and-bounties" class="toc-h2 toc-link" data-title="gitcoin-and-bounties">Gitcoin and Bounties</a>
                  </li>
                  <li>
                    <a href="#coding-style" class="toc-h2 toc-link" data-title="coding-style">Coding Style</a>
                  </li>
                  <li>
                    <a href="#community-guidelines" class="toc-h2 toc-link" data-title="community-guidelines">Community Guidelines</a>
                  </li>
                  <li>
                    <a href="#reporting-issues" class="toc-h2 toc-link" data-title="reporting-issues">Reporting Issues</a>
                  </li>
                  <li>
                    <a href="#security-issues" class="toc-h2 toc-link" data-title="security-issues">Security Issues</a>
                  </li>
                  <li>
                    <a href="#community-improvement" class="toc-h2 toc-link" data-title="community-improvement">Community Improvement</a>
                  </li>
                  <li>
                    <a href="#full-time-positions" class="toc-h2 toc-link" data-title="full-time-positions">Full Time Positions</a>
                  </li>
              </ul>
          </li>
      </div>
        <ul class="toc-footer">
            <li><a href='http://www.marketprotocol.io/'>Home</a></li>
            <li><a href='http://dapp.marketprotocol.io/'>dApp</a></li>
            <li><a href='https://www.marketprotocol.io/assets/MARKET_Protocol-Whitepaper.pdf'>Whitepaper</a></li>
            <li><a href='https://github.com/MARKETProtocol/'>GitHub</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Welcome to MARKET Protocol documentation here you will find documentation for our smart contracts and APIs.</p>

<p>MARKET Protocol has been created to provide a secure, flexible, open source foundation for decentralized trading on the 
Ethereum blockchain. We provide the pieces necessary to create a decentralized exchange, including the requisite 
clearing and collateral pool infrastructure, enabling third parties to build applications for trading.</p>

<blockquote>
<p>Visit our Github: <a href="https://github.com/MARKETProtocol">https://github.com/MARKETProtocol</a></p>
</blockquote>
<h2 id='documentation'>Documentation</h2>
<ul>
<li><a href="#solidity-smart-contracts">Smart Contracts</a>: The underlying MARKET Protocol smart contracts</li>
<li><a href="#api">API</a>:  Typescript API documentation</li>
<li><a href="#dapp">dApp</a>: Decentralized application allowing for easy MARKET Protocol contract deployment and exploration</li>
</ul>
<h2 id='frequently-asked-questions'>Frequently Asked Questions</h2>
<ul>
<li><a href="#faq-general">General FAQ</a></li>
<li><a href="#faq-solidity-smart-contracts">Smart Contract FAQ</a></li>
<li><a href="#faq-api">API FAQ</a> </li>
<li><a href="#faq-dapp">dApp FAQ</a> </li>
</ul>
<h1 id='dapp'>dApp</h1>
<p>The MARKET Protocol dApp provides tools for contract creation, oracle testing and deployment. 
Additionally, users are able to easily search previously deployed MARKET contracts they would 
like to trade.</p>

<p>A simulated trading environment allows user to place test trades and participate in beta
releases of the protocol.</p>

<p>Our beta dApp is currently running on the <code>Rinkeby testnet</code> <a href="https://dapp.marketprotocol.io/">here</a>.</p>
<h2 id='using-an-ethereum-enabled-browser'>Using an Ethereum-enabled browser</h2>
<p>For testing and interacting with our dApp, you will need to use a browser that supports Web3. 
We recommend using the <a href="https://metamask.io/">Metamask Chrome Browser Extension</a>. This will enable you to connect to the 
Ethereum network from your browser. Metamask allows you to run Ethereum dApps right in your browser without running a full Ethereum node.</p>
<h2 id='acquire-test-eth'>Acquire Test ETH</h2>
<p>Our smart contracts are currently deployed on the <code>Rinkeby testnet</code>. You will need to have test ETH to use this library. 
You can request test funds from the <a href="https://faucet.rinkeby.io/">Rinkeby faucet</a>. </p>

<aside class="notice">
Always confirm that you are on Rinkeby testnet when testing our dApp.
</aside>
<h2 id='contract-deployment'>Contract Deployment</h2>
<p>MARKET Protocol creates a flexible contract specification which allows users to easily implement
their desired contract prior to trading.  First time users, can use our 
<a href="https://dapp.marketprotocol.io/contract/deploy?mode=guided">Guided Deploy</a> process
walking them through the step by step process to deployment.  Expert users, can opt for a more
condensed process with the <a href="https://dapp.marketprotocol.io/contract/deploy?mode=quick">Quick Deploy</a> </p>
<h3 id='guided-deploy'>Guided Deploy</h3>
<p>MARKET Protocol Quick Deploy provides a step by step guide to first time deployment.  Below are the needed variables
to deploy a contract to the Ethereum Blockchain</p>

<ol>
<li><code>Name</code> - the contract name should be as descriptive as possible capturing the underlying asset relationship as well as possibly the expiration. 
Something like <code>ETH/BTC-Kraken_YYYY-MM-DD</code> may help others understand the underlying asset, the data source, and 
expiration date in a nice human readable and searchable way.
In the future, MARKET will implement a standardized naming convention and guidelines to formalize this process</li>
<li><code>Base Token</code> - every contract should be backed by an ERC20 Token that will be used a collateral for the contract. Traders 
must deposit tokens to the smart contract prior to trading, and upon execution of a trade, the appropriate amount of 
collateral becomes locked until that position is exited. In this fashion, all open positions always remain 100% 
collateralized removing counter party risk from the traders. Please specify a ERC20 Token address for this contract.
In the future, users will be able to easily select from well known ERC20 tokens to ensure more safety and 
avoid dealing with long addresses.</li>
<li><code>Oraclize.it data source</code> - Oraclize.it offers several data-sources such as &quot;URL&quot; and &quot;WolframAlpha&quot;</li>
<li><code>Price Decimal Places</code> - Ethereum currently does not support floating points numbers. Therefore all prices reported by 
oracles must be converted to a whole number (integer). This variable is how many decimal places one needs to move 
the decimal in order to go from the oracle query price to an integer. For example, if the oracle query results 
returned a value of 190.22, we need to move the decimal two (2) places to convert to a whole number of 19022, 
so we would enter 2. </li>
<li><code>Price Floor</code> - this is the lower bound of price exposure this contract will trade. If the oracle reports a price 
below this value the contract will enter into settlement. This should also be represented as a whole number. 
If we take the example above of a price of 190.22 and decide the Floor for our contract should be 150.00, 
we would enter 15000.</li>
<li><code>Price Cap</code> - This is the upper bound of price exposure this contract will trade. If the oracle reports a price above this value 
the contract will enter into settlement. Following our example, if we decide the Cap for our contract 
should be 230.00, we would enter 23000 as our Cap.<br></li>
<li><code>Qty Multiplier</code> - The quantity multiplier allows the user to specify how many base units (for Ethereum, this would be wei) each integer 
price movement changes the value of the contract. If our integerized price was 19022 with a qty multiplier of 1, 
and the price moved to 19023, then the value will have change by 1 wei. If however the multiplier was set at 
1,000,000,000 the price movement of 1 unit would now correspond to a value of 1 gwei (not wei). 
Please see <a href="https://etherconverter.online/">here</a> for an ethereum unit converter.</li>
<li><code>Expiration Time</code> - upon reaching the expiration timestamp all open positions will settle against the final 
price query returned by the oracle.</li>
</ol>
<h3 id='quick-deploy'>Quick Deploy</h3>
<p>MARKET Protocol Quick Deploy provides a scaled down interface for easy deployment of contracts to the 
Ethereum blockchain.  Expert users can enter variables, that are validated with error checking prior
to deploying.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Name</td>
<td>Viewable name of this contract, in the future we will implement suggested naming conventions</td>
</tr>
<tr>
<td>Base Token Address</td>
<td>address of the ERC20 token that will be used for collateral</td>
</tr>
<tr>
<td>Price Floor</td>
<td>minimum tradeable price of this contract</td>
</tr>
<tr>
<td>Price Cap</td>
<td>maximum tradeable price of this contract</td>
</tr>
<tr>
<td>Price Decimal Places</td>
<td>Since all numbers must be represented as integers on the Ethereum blockchain, this is how many decimal places one needs to move the decimal in order to go from the oracle query price to an integer. For instance if the oracle query results returned a value such as 190.22, we need to move the decimal two (2) places to convert to an integer value of 19022.</td>
</tr>
<tr>
<td>Qty Multiplier</td>
<td>The qty multiplier allows the user to specify how many base units (for ethereum, this would be wei) each integer price movement changes the value of the contract. If our integerized price was 19022 with a qty multiplier of 1, and the price moved to 19023, then the value will have change by 1 wei. If however the multiplier was set at 1,000,000,000 the price movement of 1 unit would now correspond to a value of 1 gwei (not wei)</td>
</tr>
<tr>
<td>Expiration Time</td>
<td>Expiration timestamp for all open positions to settle.</td>
</tr>
<tr>
<td>Oraclize.it data source</td>
<td>Available data sources from Oraclize.it</td>
</tr>
<tr>
<td>Oraclize.it Query</td>
<td>Properly structured Oraclize.it query, please use the <a href="http://dapp.marketprotocol.io/test">test query</a> page for clarification</td>
</tr>
</tbody></table>
<h2 id='explore-contracts'>Explore Contracts</h2>
<p>MARKET Protocol&#39;s dApp provides the needed functionality to easily search, filter, and sort already deployed
MARKET Smart Contracts.  </p>
<h2 id='find-contracts'>Find Contracts</h2>
<p>The <a href="https://dapp.marketprotocol.io/contract/find">Find Contracts</a> screen allows for a reverse lookup
for MARKET Contracts using the ethereum address of the deployed contract.  Users can enter
a known address, if valid, the dApp will display the current specifications of the MARKET Contract
deployed to this address.</p>
<h2 id='test-query'>Test Query</h2><h2 id='simulated-exchange'>Simulated Exchange</h2>
<p>Coming soon...</p>
<h1 id='api'>API</h1>
<p>Coming Soon...</p>
<h1 id='solidity-smart-contracts'>Solidity Smart Contracts</h1>
<p>All code for our smart contracts can be found <a href="https://github.com/MARKETProtocol/MARKETProtocol">here</a>. If you have any
issues to report please do so by opening an issue on <a href="https://github.com/MARKETProtocol/MARKETProtocol/issues">GitHub</a>.</p>
<h2 id='market-contract'>Market Contract</h2>
<blockquote>
<p>MarketContract constructor:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="c1">/// @param contractName viewable name of this contract (BTC/ETH, LTC/ETH, etc)</span>
<span class="c1">/// @param marketTokenAddress address of our member token</span>
<span class="c1">/// @param baseTokenAddress address of the ERC20 token that will be used for collateral and pricing</span>
<span class="c1">/// @param contractSpecs array of unsigned integers including:</span>
<span class="c1">/// floorPrice minimum tradeable price of this contract, contract enters settlement if breached</span>
<span class="c1">/// capPrice maximum tradeable price of this contract, contract enters settlement if breached</span>
<span class="c1">/// priceDecimalPlaces number of decimal places to convert our queried price from a floating point to</span>
<span class="c1">/// an integer</span>
<span class="c1">/// qtyMultiplier multiply traded qty by this value from base units of collateral token.</span>
<span class="c1">/// expirationTimeStamp - seconds from epoch that this contract expires and enters settlement</span>
<span class="kd">function</span> <span class="nx">MarketContract</span><span class="p">(</span>
    <span class="nx">string</span> <span class="nx">contractName</span><span class="p">,</span>
    <span class="nx">address</span> <span class="nx">marketTokenAddress</span><span class="p">,</span>
    <span class="nx">address</span> <span class="nx">baseTokenAddress</span><span class="p">,</span>
    <span class="nx">uint</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="nx">contractSpecs</span>
<span class="p">)</span> <span class="kr">public</span>
<span class="p">{</span>
    <span class="nx">MKT_TOKEN_ADDRESS</span> <span class="o">=</span> <span class="nx">marketTokenAddress</span><span class="p">;</span>
    <span class="nx">MKT_TOKEN</span> <span class="o">=</span> <span class="nx">MarketToken</span><span class="p">(</span><span class="nx">marketTokenAddress</span><span class="p">);</span>
    <span class="nx">require</span><span class="p">(</span><span class="nx">MKT_TOKEN</span><span class="p">.</span><span class="nx">isBalanceSufficientForContractCreation</span><span class="p">(</span><span class="nx">msg</span><span class="p">.</span><span class="nx">sender</span><span class="p">));</span>    <span class="c1">// creator must be MKT holder</span>
    <span class="nx">PRICE_FLOOR</span> <span class="o">=</span> <span class="nx">contractSpecs</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="nx">PRICE_CAP</span> <span class="o">=</span> <span class="nx">contractSpecs</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
    <span class="nx">require</span><span class="p">(</span><span class="nx">PRICE_CAP</span> <span class="o">&gt;</span> <span class="nx">PRICE_FLOOR</span><span class="p">);</span>

    <span class="nx">PRICE_DECIMAL_PLACES</span> <span class="o">=</span> <span class="nx">contractSpecs</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
    <span class="nx">QTY_MULTIPLIER</span> <span class="o">=</span> <span class="nx">contractSpecs</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
    <span class="nx">EXPIRATION</span> <span class="o">=</span> <span class="nx">contractSpecs</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
    <span class="nx">require</span><span class="p">(</span><span class="nx">EXPIRATION</span> <span class="o">&gt;</span> <span class="nx">now</span><span class="p">);</span>

    <span class="nx">CONTRACT_NAME</span> <span class="o">=</span> <span class="nx">contractName</span><span class="p">;</span>
    <span class="nx">BASE_TOKEN_ADDRESS</span> <span class="o">=</span> <span class="nx">baseTokenAddress</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<p>The <code>MarketContract</code> represents the main contract responsible for 
combining needed functionality for trading, settlement and position management.  Each <code>MarketContract</code> 
must be paired with a unique <code>MarketCollateralPool</code> (<a href="#collateral-pool">see below</a>) after instantiation in order to allow trading to become
enabled.  </p>

<p><code>MarketContract</code> is an abstract contract that will allow for implementing 
classes such as <code>MarketContractOraclize</code> to complete the needed top level functionality around oracle solutions.
We intend to expand our offering of oracle solutions offered in the near future.  If there are oracle services that
you would like to submit for possible inclusion in these future plans, please <a href="mailto:info@marketprotocol.io">contact</a> us</p>
<h3 id='oracle-costs'>Oracle Costs</h3>
<p>The <code>Creator</code> of the <code>MarketContract</code> must pre-fund the contract with enough ETH in order to pay for the gas costs
associated with the needed oracle query.  Currently from Oraclize.it - the first query for any contract is free,
so this need has been removed.</p>

<aside class="notice">
After linking of the <code>MarketContract</code> and the <code>MarketCollateralPool</code> is completed, the contract also must be added to 
the <code>MarketContractRegistry</code> in order to be fully functional for trading.
</aside>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>contractName</td>
<td>viewable name of this contract, in the future we will implement suggested naming conventions</td>
</tr>
<tr>
<td>marketTokenAddress</td>
<td>address of the MKT deployed ERC20 token</td>
</tr>
<tr>
<td>baseTokenAddress</td>
<td>address of the ERC20 token that will be used for collateral</td>
</tr>
<tr>
<td>contractSpecs</td>
<td>array of unsigned integers including the below parameters</td>
</tr>
<tr>
<td>floorPrice</td>
<td>minimum tradeable price of this contract</td>
</tr>
<tr>
<td>capPrice</td>
<td>maximum tradeable price of this contract</td>
</tr>
<tr>
<td>expirationTimeStamp</td>
<td>seconds from epoch that this contract expires and enters settlement</td>
</tr>
</tbody></table>
<h2 id='market-contract-oraclize'>Market Contract Oraclize</h2>
<blockquote>
<p>MarketContractOraclize constructor:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="c1">/// @param contractName viewable name of this contract (BTC/ETH, LTC/ETH, etc)</span>
<span class="c1">/// @param marketTokenAddress address of our member token</span>
<span class="c1">/// @param baseTokenAddress address of the ERC20 token that will be used for collateral and pricing</span>
<span class="c1">/// @param contractSpecs array of unsigned integers including:</span>
<span class="c1">/// floorPrice minimum tradeable price of this contract, contract enters settlement if breached</span>
<span class="c1">/// capPrice maximum tradeable price of this contract, contract enters settlement if breached</span>
<span class="c1">/// priceDecimalPlaces number of decimal places to convert our queried price from a floating point to</span>
<span class="c1">/// an integer</span>
<span class="c1">/// qtyMultiplier multiply traded qty by this value from base units of collateral token.</span>
<span class="c1">/// expirationTimeStamp - seconds from epoch that this contract expires and enters settlement</span>
<span class="c1">/// @param oracleDataSource a data-source such as "URL", "WolframAlpha", "IPFS"</span>
<span class="c1">/// see http://docs.oraclize.it/#ethereum-quick-start-simple-query</span>
<span class="c1">/// @param oracleQuery see http://docs.oraclize.it/#ethereum-quick-start-simple-query for examples</span>
<span class="kd">function</span> <span class="nx">MarketContractOraclize</span><span class="p">(</span>
    <span class="nx">string</span> <span class="nx">contractName</span><span class="p">,</span>
    <span class="nx">address</span> <span class="nx">marketTokenAddress</span><span class="p">,</span>
    <span class="nx">address</span> <span class="nx">baseTokenAddress</span><span class="p">,</span>
    <span class="nx">uint</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="nx">contractSpecs</span><span class="p">,</span>
    <span class="nx">string</span> <span class="nx">oracleDataSource</span><span class="p">,</span>
    <span class="nx">string</span> <span class="nx">oracleQuery</span>
<span class="p">)</span> <span class="nx">MarketContract</span><span class="p">(</span>
    <span class="nx">contractName</span><span class="p">,</span>
    <span class="nx">marketTokenAddress</span><span class="p">,</span>
    <span class="nx">baseTokenAddress</span><span class="p">,</span>
    <span class="nx">contractSpecs</span>
<span class="p">)</span>  <span class="kr">public</span>
<span class="p">{</span>
    <span class="nx">oraclize_setProof</span><span class="p">(</span><span class="nx">proofType_TLSNotary</span> <span class="o">|</span> <span class="nx">proofStorage_IPFS</span><span class="p">);</span>
    <span class="nx">ORACLE_DATA_SOURCE</span> <span class="o">=</span> <span class="nx">oracleDataSource</span><span class="p">;</span>
    <span class="nx">ORACLE_QUERY</span> <span class="o">=</span> <span class="nx">oracleQuery</span><span class="p">;</span>
    <span class="nx">require</span><span class="p">(</span><span class="nx">EXPIRATION</span> <span class="o">&gt;</span> <span class="nx">now</span><span class="p">);</span>         <span class="c1">// Require expiration time in the future.</span>

    <span class="c1">// Future timestamp must be within 60 days from now.</span>
    <span class="c1">// https://docs.oraclize.it/#ethereum-quick-start-schedule-a-query-in-the-future</span>
    <span class="nx">uint</span> <span class="nx">secondsPerSixtyDays</span> <span class="o">=</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">24</span> <span class="o">*</span> <span class="mi">60</span><span class="p">;</span>
    <span class="nx">require</span><span class="p">(</span><span class="nx">EXPIRATION</span> <span class="o">-</span> <span class="nx">now</span> <span class="o">&lt;=</span> <span class="nx">secondsPerSixtyDays</span><span class="p">);</span>
    <span class="nx">queryOracle</span><span class="p">();</span>                      <span class="c1">// Schedule a call to oracle at contract expiration time.</span>
<span class="p">}</span>
</code></pre>
<p><code>MarketContractOraclize</code> is the first fully implemented <code>MarketContract</code> that has been built out.  Using 
<a href="http://www.oraclize.it/">Oraclize.it</a> allows for several different sources of truth in order to settle contracts.
More information on forming correct queries can 
be found in their <a href="http://docs.oraclize.it/#ethereum-quick-start-simple-query">documentation</a>.</p>

<p>Our <a href="https://app.marketprotocol.io">dApp</a> additionally has some help in formatting your queries correctly
and a test environment to ensure the queries are correct prior to contract deployment.</p>
<h3 id='additional-parameters'>Additional parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>oracleDataSource</td>
<td>a data-source such as &quot;URL&quot;, &quot;WolframAlpha&quot;, &quot;IPFS&quot;</td>
</tr>
<tr>
<td>oracleQuery</td>
<td>properly formatted Oraclize.it query</td>
</tr>
</tbody></table>
<h2 id='market-collateral-pool'>Market Collateral Pool</h2>
<blockquote>
<p>MarketCollateralPool constructor:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="c1">/// @dev instantiates a collateral pool that is unique to the supplied address of a MarketContract. This pairing</span>
<span class="c1">/// is 1:1</span>
<span class="c1">/// @param marketContractAddress deployed address of a MarketContract</span>
<span class="kd">function</span> <span class="nx">MarketCollateralPool</span><span class="p">(</span><span class="nx">address</span> <span class="nx">marketContractAddress</span><span class="p">)</span> <span class="nx">Linkable</span><span class="p">(</span><span class="nx">marketContractAddress</span><span class="p">)</span> <span class="kr">public</span> <span class="p">{</span>
    <span class="nx">MKT_CONTRACT</span> <span class="o">=</span> <span class="nx">MarketContract</span><span class="p">(</span><span class="nx">marketContractAddress</span><span class="p">);</span>
    <span class="nx">MKT_TOKEN_ADDRESS</span> <span class="o">=</span> <span class="nx">MKT_CONTRACT</span><span class="p">.</span><span class="nx">MKT_TOKEN_ADDRESS</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>
<p>The <code>MarketCollateralPool</code> is a contract controlled by a specific <code>MarketContract</code>.  It holds users balances, 
locked collateral balances and open positions accounting.  These balances and positions are unique to the linked 
<code>MarketContract</code> and a user must deposit funds for each <code>MarketContract</code> they intend to trade.  The ERC20 Token
specified are the only accepted form of funding or collateralization.</p>
<h3 id='depositing-funds-for-trading'>Depositing funds for trading</h3>
<blockquote>
<p>depositTokensForTrading function</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="c1">/// @notice deposits tokens to the smart contract to fund the user account and provide needed tokens for collateral</span>
<span class="c1">/// pool upon trade matching.</span>
<span class="c1">/// @param depositAmount qty of ERC20 tokens to deposit to the smart contract to cover open orders and collateral</span>
<span class="kd">function</span> <span class="nx">depositTokensForTrading</span><span class="p">(</span><span class="nx">uint256</span> <span class="nx">depositAmount</span><span class="p">)</span> <span class="nx">external</span> <span class="p">{</span>
    <span class="c1">// user must call approve!</span>
    <span class="nx">require</span><span class="p">(</span><span class="nx">MarketToken</span><span class="p">(</span><span class="nx">MKT_TOKEN_ADDRESS</span><span class="p">).</span><span class="nx">isUserEnabledForContract</span><span class="p">(</span><span class="nx">MKT_CONTRACT</span><span class="p">,</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">sender</span><span class="p">));</span>
    <span class="nx">uint256</span> <span class="nx">balanceAfterDeposit</span> <span class="o">=</span> <span class="nx">userAddressToAccountBalance</span><span class="p">[</span><span class="nx">msg</span><span class="p">.</span><span class="nx">sender</span><span class="p">].</span><span class="nx">add</span><span class="p">(</span><span class="nx">depositAmount</span><span class="p">);</span>
    <span class="nx">ERC20</span><span class="p">(</span><span class="nx">MKT_CONTRACT</span><span class="p">.</span><span class="nx">BASE_TOKEN_ADDRESS</span><span class="p">()).</span><span class="nx">safeTransferFrom</span><span class="p">(</span><span class="nx">msg</span><span class="p">.</span><span class="nx">sender</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="nx">depositAmount</span><span class="p">);</span>
    <span class="nx">userAddressToAccountBalance</span><span class="p">[</span><span class="nx">msg</span><span class="p">.</span><span class="nx">sender</span><span class="p">]</span> <span class="o">=</span> <span class="nx">balanceAfterDeposit</span><span class="p">;</span>
    <span class="nx">UpdatedUserBalance</span><span class="p">(</span><span class="nx">msg</span><span class="p">.</span><span class="nx">sender</span><span class="p">,</span> <span class="nx">balanceAfterDeposit</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
<p>Funds deposited by a user are allocated to their address&#39;s account balance until a point at which a new position is 
opened and the funds then become allocated to <code>collateralPoolBalance</code> and are locked until the user exits their
position or the contract expires.  In this way, all open positions are always fully collateralized eliminating any
counter party risk and ensuring the solvency of the contract.</p>
<h3 id='calculating-needed-collateral-and-maximum-possible-loss'>Calculating needed collateral and maximum possible loss</h3>
<blockquote>
<p>calculateNeededCollateral function</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="c1">/// @notice determines the amount of needed collateral for a given position (qty and price)</span>
<span class="c1">/// @param priceFloor lowest price the contract is allowed to trade before expiration</span>
<span class="c1">/// @param priceCap highest price the contract is allowed to trade before expiration</span>
<span class="c1">/// @param qtyMultiplier multiplier for qty from base units</span>
<span class="c1">/// @param qty signed integer corresponding to the traded quantity</span>
<span class="c1">/// @param price of the trade</span>
<span class="kd">function</span> <span class="nx">calculateNeededCollateral</span><span class="p">(</span>
    <span class="nx">uint</span> <span class="nx">priceFloor</span><span class="p">,</span>
    <span class="nx">uint</span> <span class="nx">priceCap</span><span class="p">,</span>
    <span class="nx">uint</span> <span class="nx">qtyMultiplier</span><span class="p">,</span>
    <span class="kr">int</span> <span class="nx">qty</span><span class="p">,</span>
    <span class="nx">uint</span> <span class="nx">price</span>
<span class="p">)</span> <span class="nx">pure</span> <span class="nx">internal</span> <span class="nx">returns</span> <span class="p">(</span><span class="nx">uint</span> <span class="nx">neededCollateral</span><span class="p">)</span>
<span class="p">{</span>

    <span class="nx">uint</span> <span class="nx">maxLoss</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">qty</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>   <span class="c1">// this qty is long, calculate max loss from entry price to floor</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">price</span> <span class="o">&lt;=</span> <span class="nx">priceFloor</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">maxLoss</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">maxLoss</span> <span class="o">=</span> <span class="nx">subtract</span><span class="p">(</span><span class="nx">price</span><span class="p">,</span> <span class="nx">priceFloor</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="c1">// this qty is short, calculate max loss from entry price to ceiling;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">price</span> <span class="o">&gt;=</span> <span class="nx">priceCap</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">maxLoss</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">maxLoss</span> <span class="o">=</span> <span class="nx">subtract</span><span class="p">(</span><span class="nx">priceCap</span><span class="p">,</span> <span class="nx">price</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="nx">neededCollateral</span> <span class="o">=</span> <span class="nx">maxLoss</span> <span class="o">*</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">qty</span><span class="p">)</span> <span class="o">*</span> <span class="nx">qtyMultiplier</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<p>The amount of funds that are allocated to the <code>collateralPoolBalance</code> upon entering a trade is defined by that positions
maximum possible loss.  </p>

<p>All positions are always fully collateralized, meaning the maximum possible loss for a position is the required 
amount of collateral to open that position. This can be calculated from the <code>price</code> and <code>qty</code> of the 
position and the defined specifications of the <code>MarketContract</code>.  </p>

<p>For a buyer, the maximum possible loss is calculated as the <code>price</code> of the 
trade minus the <code>priceFloor</code> times the qty transacted. Conversely, if you are opening a short position the maximum 
loss is calculated as <code>priceCap</code> minus the price of the trade, multiplied by the <code>qty</code> transacted. Upon filling an order 
both parties commit their respective maximum loss to the collateral pool.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>priceFloor</td>
<td>as defined in the <code>MarketContract</code></td>
</tr>
<tr>
<td>priceCap</td>
<td>as defined in the <code>MarketContract</code></td>
</tr>
<tr>
<td>qtyMultiplier</td>
<td>as defined in the <code>MarketContract</code></td>
</tr>
<tr>
<td>qty</td>
<td>signed integer corresponding to the traded quantity</td>
</tr>
<tr>
<td>price</td>
<td>agreed upon execution price</td>
</tr>
</tbody></table>
<h3 id='withdrawing-funds'>Withdrawing funds</h3>
<blockquote>
<p>withdrawTokens function</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="c1">/// @notice removes token from users trading account</span>
<span class="c1">/// @param withdrawAmount qty of token to attempt to withdraw</span>
<span class="kd">function</span> <span class="nx">withdrawTokens</span><span class="p">(</span><span class="nx">uint256</span> <span class="nx">withdrawAmount</span><span class="p">)</span> <span class="kr">public</span> <span class="p">{</span>
    <span class="c1">//require(userAddressToAccountBalance[msg.sender] &gt;= withdrawAmount);  subtract call below will enforce this</span>
    <span class="nx">uint256</span> <span class="nx">balanceAfterWithdrawal</span> <span class="o">=</span> <span class="nx">userAddressToAccountBalance</span><span class="p">[</span><span class="nx">msg</span><span class="p">.</span><span class="nx">sender</span><span class="p">].</span><span class="nx">subtract</span><span class="p">(</span><span class="nx">withdrawAmount</span><span class="p">);</span>
    <span class="nx">userAddressToAccountBalance</span><span class="p">[</span><span class="nx">msg</span><span class="p">.</span><span class="nx">sender</span><span class="p">]</span> <span class="o">=</span> <span class="nx">balanceAfterWithdrawal</span><span class="p">;</span>   <span class="c1">// update balance before external call!</span>
    <span class="nx">ERC20</span><span class="p">(</span><span class="nx">MKT_CONTRACT</span><span class="p">.</span><span class="nx">BASE_TOKEN_ADDRESS</span><span class="p">()).</span><span class="nx">safeTransfer</span><span class="p">(</span><span class="nx">msg</span><span class="p">.</span><span class="nx">sender</span><span class="p">,</span> <span class="nx">withdrawAmount</span><span class="p">);</span>
    <span class="nx">UpdatedUserBalance</span><span class="p">(</span><span class="nx">msg</span><span class="p">.</span><span class="nx">sender</span><span class="p">,</span> <span class="nx">balanceAfterWithdrawal</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
<p>At any time, tokens that are not allocated to an open position held by the user, are able to be withdrawn.</p>

<p>Upon exiting a position funds are returned to the user&#39;s account balance, net of any profit or loss.  Similarly,
if the contract expires with the user maintaining an open position, their position settles to the final settlement
price of the contract and funds are then eligible for immediate withdraw.</p>
<h2 id='orders'>Orders</h2>
<blockquote>
<p>MARKET&#39;s Order struct</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="nx">struct</span> <span class="nx">Order</span> <span class="p">{</span>
    <span class="nx">address</span> <span class="nx">maker</span><span class="p">;</span>
    <span class="nx">address</span> <span class="nx">taker</span><span class="p">;</span>
    <span class="nx">address</span> <span class="nx">feeRecipient</span><span class="p">;</span>
    <span class="nx">uint</span> <span class="nx">makerFee</span><span class="p">;</span>
    <span class="nx">uint</span> <span class="nx">takerFee</span><span class="p">;</span>
    <span class="nx">uint</span> <span class="nx">price</span><span class="p">;</span>
    <span class="nx">uint</span> <span class="nx">expirationTimeStamp</span><span class="p">;</span>
    <span class="kr">int</span> <span class="nx">qty</span><span class="p">;</span>
    <span class="nx">bytes32</span> <span class="nx">orderHash</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<blockquote>
<p>Generating and confirming Order signatures</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="c1">/// @notice creates the hash for the given order parameters.</span>
<span class="c1">/// @param contractAddress address of the calling contract, orders are unique to each contract</span>
<span class="c1">/// @param orderAddresses array of 3 address. maker, taker, and feeRecipient</span>
<span class="c1">/// @param unsignedOrderValues array of 5 unsigned integers. makerFee, takerFee, price, expirationTimeStamp and salt</span>
<span class="c1">/// @param orderQty signed qty of the original order.</span>
<span class="kd">function</span> <span class="nx">createOrderHash</span><span class="p">(</span>
    <span class="nx">address</span> <span class="nx">contractAddress</span><span class="p">,</span>
    <span class="nx">address</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="nx">orderAddresses</span><span class="p">,</span>
    <span class="nx">uint</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="nx">unsignedOrderValues</span><span class="p">,</span>
    <span class="kr">int</span> <span class="nx">orderQty</span>
<span class="p">)</span> <span class="kr">public</span> <span class="nx">pure</span> <span class="nx">returns</span> <span class="p">(</span><span class="nx">bytes32</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="nx">keccak256</span><span class="p">(</span>
        <span class="nx">contractAddress</span><span class="p">,</span>
        <span class="nx">orderAddresses</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
        <span class="nx">orderAddresses</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
        <span class="nx">orderAddresses</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
        <span class="nx">unsignedOrderValues</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
        <span class="nx">unsignedOrderValues</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
        <span class="nx">unsignedOrderValues</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
        <span class="nx">unsignedOrderValues</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
        <span class="nx">unsignedOrderValues</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span>
        <span class="nx">orderQty</span>
    <span class="p">);</span>
<span class="p">}</span>

<span class="c1">/// @notice confirms hash originated from signer</span>
<span class="c1">/// @param signerAddress - address of order originator</span>
<span class="c1">/// @param hash - original order hash</span>
<span class="c1">/// @param v order signature</span>
<span class="c1">/// @param r order signature</span>
<span class="c1">/// @param s order signature</span>
<span class="kd">function</span> <span class="nx">isValidSignature</span><span class="p">(</span>
    <span class="nx">address</span> <span class="nx">signerAddress</span><span class="p">,</span>
    <span class="nx">bytes32</span> <span class="nx">hash</span><span class="p">,</span>
    <span class="nx">uint8</span> <span class="nx">v</span><span class="p">,</span>
    <span class="nx">bytes32</span> <span class="nx">r</span><span class="p">,</span>
    <span class="nx">bytes32</span> <span class="nx">s</span>
<span class="p">)</span> <span class="kr">public</span> <span class="nx">pure</span> <span class="nx">returns</span> <span class="p">(</span><span class="nx">bool</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="nx">signerAddress</span> <span class="o">==</span> <span class="nx">ecrecover</span><span class="p">(</span>
        <span class="nx">keccak256</span><span class="p">(</span><span class="s2">"\x19Ethereum Signed Message:\n32"</span><span class="p">,</span> <span class="nx">hash</span><span class="p">),</span>
        <span class="nx">v</span><span class="p">,</span>
        <span class="nx">r</span><span class="p">,</span>
        <span class="nx">s</span>
    <span class="p">);</span>
<span class="p">}</span>
</code></pre>
<p>MARKET utilizes off chain orders to reduce the number of needed transactions that must occur on the blockchain.   Third 
party Nodes will provide order book hosting and aggregation services on top of the protocol to facilitate liquidity.
Orders however are cryptographically signed to ensure no manipulation and facilitate trust-less executions.</p>

<p>Makers create orders and sign them (making liquidity), while takers select signed orders 
to trade against (taking liquidity).  </p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>maker</td>
<td>address of user who originated and signed this order</td>
</tr>
<tr>
<td>taker</td>
<td>address of counter-party to fill order or <code>null</code> to allow any counter-party</td>
</tr>
<tr>
<td>feeRecipient</td>
<td>address of fee recipient node, if any (MARKET does not charge any fees, but nodes may)</td>
</tr>
<tr>
<td>makerFee</td>
<td>fee to paid by the maker in MKT tokens to the <code>feeRecipient</code></td>
</tr>
<tr>
<td>takerFee</td>
<td>fee to paid by the taker in MKT tokens to the <code>feeRecipient</code></td>
</tr>
<tr>
<td>price</td>
<td>agreed upon execution price</td>
</tr>
<tr>
<td>qty</td>
<td>agreed upon execution qty</td>
</tr>
<tr>
<td>orderHash</td>
<td>hash created by maker to ensure all order parameters are valid and originated from <code>maker</code></td>
</tr>
</tbody></table>

<p>A maker creates an order with the specified parameters and calls <code>createOrderHash</code> that is transmitted 
along with the order.  Any part can verify the veracity of the hash with <code>isValidSignature</code> which will match the
signer&#39;s address if all parameters of the order are valid.</p>

<p>Makers may cancel an order at any time, unfortunately this transaction happens on chain and will require gas to complete.
Alternatively, an <code>Order</code> can be created with an <code>expirationTimeStamp</code> expiring the order automatically without the
additional gas cost. </p>
<h2 id='trading'>Trading</h2><pre class="highlight javascript tab-javascript"><code>
<span class="c1">// @notice called by a participant wanting to trade a specific order</span>
<span class="c1">/// @param orderAddresses - maker, taker and feeRecipient addresses</span>
<span class="c1">/// @param unsignedOrderValues makerFee, takerFree, price, expirationTimeStamp, and salt (for hashing)</span>
<span class="c1">/// @param orderQty quantity of the order</span>
<span class="c1">/// @param qtyToFill quantity taker is willing to fill of original order(max)</span>
<span class="c1">/// @param v order signature</span>
<span class="c1">/// @param r order signature</span>
<span class="c1">/// @param s order signature</span>
<span class="kd">function</span> <span class="nx">tradeOrder</span><span class="p">(</span>
    <span class="nx">address</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="nx">orderAddresses</span><span class="p">,</span>
    <span class="nx">uint</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="nx">unsignedOrderValues</span><span class="p">,</span>
    <span class="kr">int</span> <span class="nx">orderQty</span><span class="p">,</span>
    <span class="kr">int</span> <span class="nx">qtyToFill</span><span class="p">,</span>
    <span class="nx">uint8</span> <span class="nx">v</span><span class="p">,</span>
    <span class="nx">bytes32</span> <span class="nx">r</span><span class="p">,</span>
    <span class="nx">bytes32</span> <span class="nx">s</span>
<span class="p">)</span> <span class="nx">external</span> <span class="nx">returns</span> <span class="p">(</span><span class="kr">int</span> <span class="nx">filledQty</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nx">require</span><span class="p">(</span><span class="nx">isCollateralPoolContractLinked</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">isSettled</span><span class="p">);</span> <span class="c1">// no trading past settlement</span>
    <span class="nx">require</span><span class="p">(</span><span class="nx">orderQty</span> <span class="o">!=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">qtyToFill</span> <span class="o">!=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">orderQty</span><span class="p">.</span><span class="nx">isSameSign</span><span class="p">(</span><span class="nx">qtyToFill</span><span class="p">));</span>   <span class="c1">// no zero trades, sings match</span>
    <span class="nx">require</span><span class="p">(</span><span class="nx">MKT_TOKEN</span><span class="p">.</span><span class="nx">isUserEnabledForContract</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">sender</span><span class="p">));</span>
    <span class="nx">OrderLib</span><span class="p">.</span><span class="nx">Order</span> <span class="nx">memory</span> <span class="nx">order</span> <span class="o">=</span> <span class="nx">address</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">createOrder</span><span class="p">(</span><span class="nx">orderAddresses</span><span class="p">,</span> <span class="nx">unsignedOrderValues</span><span class="p">,</span> <span class="nx">orderQty</span><span class="p">);</span>
    <span class="nx">require</span><span class="p">(</span><span class="nx">MKT_TOKEN</span><span class="p">.</span><span class="nx">isUserEnabledForContract</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">order</span><span class="p">.</span><span class="nx">maker</span><span class="p">));</span>

    <span class="c1">// taker can be anyone, or specifically the caller!</span>
    <span class="nx">require</span><span class="p">(</span><span class="nx">order</span><span class="p">.</span><span class="nx">taker</span> <span class="o">==</span> <span class="nx">address</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">||</span> <span class="nx">order</span><span class="p">.</span><span class="nx">taker</span> <span class="o">==</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">sender</span><span class="p">);</span>
    <span class="c1">// do not allow self trade</span>
    <span class="nx">require</span><span class="p">(</span><span class="nx">order</span><span class="p">.</span><span class="nx">maker</span> <span class="o">!=</span> <span class="nx">address</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">order</span><span class="p">.</span><span class="nx">maker</span> <span class="o">!=</span> <span class="nx">order</span><span class="p">.</span><span class="nx">taker</span><span class="p">);</span>
    <span class="nx">require</span><span class="p">(</span>
        <span class="nx">order</span><span class="p">.</span><span class="nx">maker</span><span class="p">.</span><span class="nx">isValidSignature</span><span class="p">(</span>
            <span class="nx">order</span><span class="p">.</span><span class="nx">orderHash</span><span class="p">,</span>
            <span class="nx">v</span><span class="p">,</span>
            <span class="nx">r</span><span class="p">,</span>
            <span class="nx">s</span>
    <span class="p">));</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">now</span> <span class="o">&gt;=</span> <span class="nx">order</span><span class="p">.</span><span class="nx">expirationTimeStamp</span><span class="p">)</span> <span class="p">{</span>
        <span class="nb">Error</span><span class="p">(</span><span class="nx">ErrorCodes</span><span class="p">.</span><span class="nx">ORDER_EXPIRED</span><span class="p">,</span> <span class="nx">order</span><span class="p">.</span><span class="nx">orderHash</span><span class="p">);</span>
        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kr">int</span> <span class="nx">remainingQty</span> <span class="o">=</span> <span class="nx">orderQty</span><span class="p">.</span><span class="nx">subtract</span><span class="p">(</span><span class="nx">getQtyFilledOrCancelledFromOrder</span><span class="p">(</span><span class="nx">order</span><span class="p">.</span><span class="nx">orderHash</span><span class="p">));</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">remainingQty</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// there is no qty remaining  - cannot fill!</span>
        <span class="nb">Error</span><span class="p">(</span><span class="nx">ErrorCodes</span><span class="p">.</span><span class="nx">ORDER_DEAD</span><span class="p">,</span> <span class="nx">order</span><span class="p">.</span><span class="nx">orderHash</span><span class="p">);</span>
        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">filledQty</span> <span class="o">=</span> <span class="nx">MathLib</span><span class="p">.</span><span class="nx">absMin</span><span class="p">(</span><span class="nx">remainingQty</span><span class="p">,</span> <span class="nx">qtyToFill</span><span class="p">);</span>
    <span class="nx">marketCollateralPool</span><span class="p">.</span><span class="nx">updatePositions</span><span class="p">(</span>
        <span class="nx">order</span><span class="p">.</span><span class="nx">maker</span><span class="p">,</span>
        <span class="nx">msg</span><span class="p">.</span><span class="nx">sender</span><span class="p">,</span>
        <span class="nx">filledQty</span><span class="p">,</span>
        <span class="nx">order</span><span class="p">.</span><span class="nx">price</span>
    <span class="p">);</span>
    <span class="nx">orderMappings</span><span class="p">.</span><span class="nx">addFilledQtyToOrder</span><span class="p">(</span><span class="nx">order</span><span class="p">.</span><span class="nx">orderHash</span><span class="p">,</span> <span class="nx">filledQty</span><span class="p">);</span>

    <span class="nx">uint</span> <span class="nx">paidMakerFee</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nx">uint</span> <span class="nx">paidTakerFee</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">order</span><span class="p">.</span><span class="nx">feeRecipient</span> <span class="o">!=</span> <span class="nx">address</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span> <span class="p">{</span>
        <span class="c1">// we need to transfer fees to recipient</span>
        <span class="nx">uint</span> <span class="nx">filledAbsQty</span> <span class="o">=</span> <span class="nx">filledQty</span><span class="p">.</span><span class="nx">abs</span><span class="p">();</span>
        <span class="nx">uint</span> <span class="nx">orderAbsQty</span> <span class="o">=</span> <span class="nx">filledQty</span><span class="p">.</span><span class="nx">abs</span><span class="p">();</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">order</span><span class="p">.</span><span class="nx">makerFee</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">paidMakerFee</span> <span class="o">=</span> <span class="nx">order</span><span class="p">.</span><span class="nx">makerFee</span><span class="p">.</span><span class="nx">divideFractional</span><span class="p">(</span><span class="nx">filledAbsQty</span><span class="p">,</span> <span class="nx">orderAbsQty</span><span class="p">);</span>
            <span class="nx">MKT_TOKEN</span><span class="p">.</span><span class="nx">safeTransferFrom</span><span class="p">(</span>
                <span class="nx">order</span><span class="p">.</span><span class="nx">maker</span><span class="p">,</span>
                <span class="nx">order</span><span class="p">.</span><span class="nx">feeRecipient</span><span class="p">,</span>
                <span class="nx">paidMakerFee</span>
            <span class="p">);</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">order</span><span class="p">.</span><span class="nx">takerFee</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">paidTakerFee</span> <span class="o">=</span> <span class="nx">order</span><span class="p">.</span><span class="nx">takerFee</span><span class="p">.</span><span class="nx">divideFractional</span><span class="p">(</span><span class="nx">filledAbsQty</span><span class="p">,</span> <span class="nx">orderAbsQty</span><span class="p">);</span>
            <span class="nx">MKT_TOKEN</span><span class="p">.</span><span class="nx">safeTransferFrom</span><span class="p">(</span>
                <span class="nx">msg</span><span class="p">.</span><span class="nx">sender</span><span class="p">,</span>
                <span class="nx">order</span><span class="p">.</span><span class="nx">feeRecipient</span><span class="p">,</span>
                <span class="nx">paidTakerFee</span>
            <span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">OrderFilled</span><span class="p">(</span>
        <span class="nx">order</span><span class="p">.</span><span class="nx">maker</span><span class="p">,</span>
        <span class="nx">msg</span><span class="p">.</span><span class="nx">sender</span><span class="p">,</span>
        <span class="nx">order</span><span class="p">.</span><span class="nx">feeRecipient</span><span class="p">,</span>
        <span class="nx">filledQty</span><span class="p">,</span>
        <span class="nx">paidMakerFee</span><span class="p">,</span>
        <span class="nx">paidTakerFee</span><span class="p">,</span>
        <span class="nx">order</span><span class="p">.</span><span class="nx">orderHash</span>
    <span class="p">);</span>

    <span class="k">return</span> <span class="nx">filledQty</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<p>When a <code>taker</code> finds an order they would like to transact against, they call the <code>tradeOrder</code> function. </p>

<p>This function, verifies the order signature, ensures all contracts and users are allowed to trade and if successful
handles the accounting with the associated resulting fills (either open a new position, or perhaps, closing out an 
existing open position). </p>

<p>A <code>taker</code> is not required to fill the entire <code>maker</code> order and specifies the <code>qty</code> they are willing to transact.  The
price however is static as set and signed by the <code>maker</code>.</p>
<h2 id='market-contract-registry'>Market Contract Registry</h2>
<p>A registry will exist of all MARKET contracts that are approved for trading.  Eventually there will be some
mechanism for the community to flag contracts that are not valid, or reasonable for removal from the white list.  At
first this may be more centralized, but eventually the goal is to have a fully decentralized community in charge of 
such matters.</p>
<h2 id='mkt-tokens'>MKT Tokens</h2>
<p>MKT Tokens are the lifeblood of the MARKET ecosystem.  All fees charged by nodes will be transacted in MKT and additionally
anyone who wishes to create a new <code>MarketContract</code> will be forced to have some minimum balance of MKT. Finally, for every
<code>MarketContract</code> a user desires to trade, some amount of MKT must be locked to enable access to that contract.  These
can be unlocked at any time the user wishes to stop trading that <code>MarketContract</code>.   </p>
<h1 id='faq-general'>FAQ - General</h1><h3 id='what-is-a-derivative'>What is a derivative?</h3>
<p>A derivative represents a contract between a buyer and a seller. The value is derived from on an underlying asset or assets. Common derivatives use stocks, commodities, currencies, bonds, or interest rates as the underlying asset for the contract.</p>
<h3 id='are-you-a-decentralized-exchange'>Are you a decentralized exchange?</h3>
<p>No, MARKET is a protocol to enable the trading of decentralized derivative like contracts.  Third parties will write the application layers on top of the protocol and we hope to create an API layer to facilitate this as well. </p>
<h3 id='who-will-host-market-39-s-order-books'>Who will host MARKET&#39;s order books?</h3>
<p>Third party order book hosts, called nodes will be provided with an API that easy allows them to host an order book.  Nodes, in turn may charge fees for the services they provide.  These fee&#39;s are not determined by MARKET and are set directly by the node.</p>
<h3 id='does-market-charge-a-fee-to-use-the-protocol'>Does MARKET charge a fee to use the protocol?</h3>
<p>MARKET doesn&#39;t charge any fees.  Nodes however may set a fee for their services of hosting order books.</p>
<h3 id='how-is-the-needed-collateral-for-an-open-position-calculated'>How is the needed collateral for an open position calculated?</h3>
<p>All positions are always fully collateralized, meaning the maximum possible loss for a position is the required amount of collateral to open that position. For a buyer, the maximum possible loss is calculated as the price of the trade minus the <code>PRICE_FLOOR</code> times the qty transacted.  Conversely, if you are opening a short position the maximum loss is calculated as <code>PRICE_CAP</code> minus the price of the trade, multiplied by the qty transacted.  Upon filling an order both parties commit their respective maximum loss to the collateral pool.</p>
<h3 id='if-i-want-to-open-a-short-position-do-i-need-to-borrow-the-asset'>If I want to open a short position do I need to borrow the asset?</h3>
<p>No, there is no borrowing, fees to be paid, or locates to deal with for shorting.  Due to the unique nature of our derivative like contracts, a trader is able to open a short position without owning the underlying asset.  This is similar to how financial futures work, where a seller of the SP500 futures, doesn&#39;t need to own, locate, or borrow the SP500 in order to gain the short price exposure to the SP500.</p>
<h3 id='when-is-my-collateral-returned-to-me-and-able-to-be-withdrawn'>When is my collateral returned to me and able to be withdrawn?</h3>
<p>Collateral is credited to a users address and able to be withdrawn upon expiration of the contract or if the user trades out of their open position.  For instance, if a trader holding a long open position, sells to close out that position prior to expiration, they will immediately be able to withdraw the collateral associated (plus or minus any profit or loss) with their trade.</p>
<h3 id='what-happens-if-i-hold-an-open-position-through-contract-expiration'>What happens if I hold an open position through contract expiration?</h3>
<p>Upon expiration, the contract will reach a settlement price via the agreed upon oracle solution.  At this point, all funds will be able to be withdrawn for all open positions.  The amount of collateral that is credited back to the user will be determined by their execution price and the settlement price of the contract.  Note, that there will probably be some short delay between contract expiration and the settlement period to allow for disputes to be raised.</p>
<h3 id='when-i-trade-out-of-an-open-position-how-is-my-profit-or-loss-allocated'>When I trade out of an open position, how is my profit or loss allocated?</h3>
<p>When a position is closed, the appropriate amount of funds are allocated back to the user and are immediately available for withdrawal from the smart contract.  If the trade that was made was profitable, more funds will be available for withdrawal than originally posted, and if the trade represented a loser for the user, less funds than originally posted would now be available for withdrawal.  As an example, let us imagine a contract with a <code>PRICE_FLOOR</code> of 50 and a <code>PRICE_CAP</code> of 150 using Token A as collateral.  Bob enters into a long position for a qty of 1 at a price of 85.  At this point 35 units of Token A would be committed to the collateral pool (representing his max possible loss).  Later, Bob exits his position by selling at a price of 95.  The amount of Token A now allocated to Bob&#39;s account is 45 (35 of which is his original collateral and 10 of which represents his profit from his trade) and is now able to be withdrawn from the smart contract if Bob so wishes. </p>
<h3 id='can-a-contract-be-created-based-on-a-different-blockhain-or-off-chain-asset'>Can a contract be created based on a different blockhain or off chain asset?</h3>
<p>Yes, by using oracle solutions for settlement users can create contracts for any type of real world asset such as the SP500, or cross chain asset prices like Bitcoin or Monero. This opens endless opportunities and diversification for the holders of ERC20 tokens who do not want to convert into fiat but want to gain market exposure to non digital or cross chain assets.  </p>
<h3 id='do-you-have-a-white-paper-available'>Do you have a white paper available?</h3>
<p>We do not currently have a public white paper available.  We are working very hard to make sure the internal documents we have are fit for public consumption and will be releasing it as soon as possible.</p>
<h3 id='how-will-disputes-be-resolved'>How will disputes be resolved?</h3>
<p>This is an area of active research and discussion.  We would love for community feedback to help shape the process.  Our current working theory is that once a contract settlement enters into a disputed state, that a second attempt may be made to use the originally agreed upon oracle, and if that still fails to enter into a crowd sourced voting from community members that are incentivized for a fair resolution.  We do anticipate that even in the best of circumstances oracle solutions will fail, or receive bad data.  The problem of bad or inaccurate market data is not new or unique in the world of finance, but the need to resolve these problems when they arise in a trust-less manner will be essential. </p>
<h3 id='how-do-i-get-involved'>How do I get involved?</h3>
<p>We are actively looking to expand our team. For more info please send an email to info@marketprotocol.io</p>
<h1 id='faq-solidity-smart-contracts'>FAQ - Solidity Smart Contracts</h1><h3 id='how-to-debug-market-protocol-tests'>How to debug MARKET Protocol tests?</h3>
<p>First option is to use console.log() to display Javascript objects and their properties on the console during test execution. This works well for simple cases, for more difficult scenarios one should set an asynchronous event watcher and expect events sent from Solidity contracts. For tests that have expectation on price or asynchronously wait for contract settlement it is also possible to manually update price using TestableMarketContractOraclize contract to verify correctness of the contract flow.</p>
<h1 id='faq-api'>FAQ - API</h1><h1 id='faq-dapp'>FAQ - dApp</h1><h1 id='getting-help'>Getting help</h1><h2 id='discord'>Discord</h2>
<p>We work in public and our company Discord is open to all. If you have questions or need help getting started, 
our <a href="https://www.marketprotocol.io/discord">Discord #engineering channel</a> is a great place to get assistance from our 
team of engineers and developers.</p>
<h2 id='email'>Email</h2>
<p>You can also reach us by email at <a href="mailto:support@marketprotocol.io">support@marketprotocol.io</a>.</p>
<h1 id='contributing'>Contributing</h1>
<p>Want to hack on MARKET Protocol? Awesome!</p>

<p>MARKET Protocol is an Open Source project and we welcome contributions of all sorts.
There are many ways to help, from reporting issues, contributing code, and helping us improve our community.</p>

<p>There are three main repositories that are considered as core components of the MARKET Protocol:</p>

<ul>
<li><a href="https://github.com/MARKETProtocol/MARKETProtocol">MARKETProtocol</a> - the core protocol of solidity smart contracts</li>
<li><a href="https://github.com/MARKETProtocol/MARKET.js">MARKET.js</a> - library of tools to interact with the protocol</li>
<li><a href="https://github.com/MARKETProtocol/dApp">dApp</a> - React based dApp for contract creation, exploration, and simulated trading.</li>
</ul>

<p>Additionally, the following repository has useful information for developers and community members:</p>

<ul>
<li><a href="https://github.com/MARKETProtocol/community">community</a> - upcoming dev calls, meeting minutes and events</li>
</ul>
<h2 id='dive-right-in'>Dive Right In</h2>
<p>If you&#39;re ready to start helping us to build the decentralized future right now and you just need an issue to focus on,
check out <a href="https://github.com/orgs/MARKETProtocol/projects/1?card_filter_query=label%3A%22help+wanted%22+no%3Aassignee+is%3Aopen">this list of open issues</a>.</p>

<p>Read our <a href="#development-process">development process</a> and <a href="#community-guidelines">community guidelines</a> first and have fun!</p>
<h2 id='development-process'>Development Process</h2>
<p>We follow the <a href="http://nvie.com/posts/a-successful-git-branching-model/">GitFlow</a> branching model for development.
The latest merged code generally lives in the <code>develop</code> branch of each repository. Your development flow should look like:</p>

<ol>
<li>Find an interesting issue and communicate! Please let the #engineering Discord channel know what you want to work on</li>
<li>Add a comment to the issue so we don&#39;t have multiple contributors unintentionally working on the same task.</li>
<li>Please include your intended solution and a time frame for completion in the issue.</li>
<li>Start with the <code>develop</code> branch and create a new feature branch</li>
<li>Follow the appropriate <a href="#coding-style">coding style</a> and write some awesome code</li>
<li>See <a href="https://tbaggery.com/2008/04/19/a-note-about-git-commit-messages.html">here</a> for some notes on good commit messages</li>
<li>Open a pull request to the <code>develop</code> branch, not <code>master</code></li>
</ol>
<h2 id='gitcoin-and-bounties'>Gitcoin and Bounties</h2>
<p>We are very proud users of <a href="https://gitcoin.co/">Gitcoin</a>.  It allows us an easy way to reward our community members
for their hard work contributing to MARKET Protocol.  Additionally, it allows us to gain traction on issues that are a
priority for us to address.  We won&#39;t always stake every issue, but if you need a bounty to encourage your participation
on an issue, and there isn&#39;t one yet, please reach out on <a href="https://www.marketprotocol.io/discord">Discord</a>.</p>

<p>There are a few guidelines when using Gitcoin that are worth mentioning</p>

<ol>
<li>Please only <code>start work</code> on an issue when your actually planning on working on it. Don&#39;t call dibs before you can allocate time to the issue</li>
<li>Please make sure to comment in the issue immediately after starting work so we know your plans for implementation and a timeline.</li>
<li>We politely ask that users only have open work on a single bounty at a time, if you have an open bounty that has a PR submitted and would like to tackle another issue, please ask in <a href="https://www.marketprotocol.io/discord">Discord</a> before proceeding</li>
<li>We will do our best to scope out the issue, but please anticipate some revision requested after you have submitted a PR, we are happy to tip you if these end up well beyond the initial scope</li>
<li>Once you have create a PR, please <code>submit work</code> on Gitcoin so we are able to pay you out once we have accepted the work</li>
</ol>
<h2 id='coding-style'>Coding Style</h2>
<p>We use a variety of programming languages in our repositories. When contributing, please follow existing coding conventions
and refer to the CONTRIBUTING.md file in the repository, if one exists.</p>

<p>[comment]: TODO: update style
For JavaScript, we use <a href="https://docs.npmjs.com/misc/coding-style">NPM&#39;s style</a>, which is automatically enforced via <a href="https://prettier.io/">prettier</a>.</p>
<h2 id='community-guidelines'>Community Guidelines</h2>
<p>We want to keep the MARKET Protocol community awesome, growing and collaborative.
We need your help to keep it that way. To help with this we&#39;ve come up with some general guidelines for the community as a whole:</p>

<ul>
<li><p>Be nice: Be courteous, respectful and polite to fellow community members: no regional, racial, gender, or other abuse
will be tolerated. We like nice people way better than mean ones!</p></li>
<li><p>Encourage diversity and participation: Make everyone in our community feel welcome, regardless of their background
and the extent of their contributions, and do everything possible to encourage participation in our community.</p></li>
<li><p>Keep it legal: Basically, don&#39;t get anybody in trouble. Share only content that you own, do not share private
or sensitive information, and don&#39;t break laws.</p></li>
<li><p>Stay on topic: Make sure that you are posting to the correct channel and avoid off-topic discussions.
Remember when you update an issue or respond to an email you are potentially sending to a large number of people.
Please consider this before you update. Also remember that nobody likes spam.</p></li>
</ul>

<p>Full code of conduct is posted available <a href="https://github.com/MARKETProtocol/community/blob/master/guidelines/code-of-confuct.md">here</a>.</p>
<h2 id='reporting-issues'>Reporting Issues</h2>
<p>If you find bugs, mistakes or inconsistencies in the project&#39;s code or
documents, please let us know by filing an issue at the appropriate issue
tracker (we use multiple repositories).</p>

<aside class="notice">
No issue is too small. Help us fix our tpyos!
</aside>

<ul>
<li><a href="https://github.com/MARKETProtocol/docs/issues">Docs issues</a></li>
<li><a href="https://github.com/MARKETProtocol/MARKETProtocol/issues">MARKET Protocol issues (Solidity)</a></li>
<li><a href="https://github.com/MARKETProtocol/MARKET.js/issues">MARKET.js</a></li>
<li><a href="https://github.com/MARKETProtocol/dApp/issues">dApp issues</a></li>
<li><a href="https://github.com/MARKETProtocol/website/issues">Main website issues</a></li>
</ul>
<h2 id='security-issues'>Security Issues</h2>
<p>The MARKET Protocol and its implementations are still in early development, which means there may be problems with the
protocol or in our implementations. We take security vulnerabilities very seriously. If you discover a security issue,
please bring it to our attention right away!</p>

<p>If you find a vulnerability please send your report privately to <a href="mailto:support@marketprotocol.io">support@marketprotocol.io</a> Please DO NOT file a public issue.</p>

<p>If the issue is a protocol weakness or something not yet deployed, feel free to discuss it openly.</p>
<h2 id='community-improvement'>Community Improvement</h2>
<p>MARKET Protocol is just as much about community as it is about our technology.</p>

<p>We need constant help in improving our documentation, building new tools to interface with our platform,
spreading the word to new users, helping new users getting setup and much more.</p>

<p>Please get in touch if you would like to help out. Our <code>general</code> channel on <a href="#discord">Discord</a> is a great place to
share ideas and volunteer to help.</p>
<h2 id='full-time-positions'>Full Time Positions</h2>
<p>MARKET Protocol occasionally hires developers for part time or full time positions.</p>

<p>We have a strong preference for hiring people who have already started contributing to the project.
If you want a full time position on our team, your best shot is to engage with our team and start contributing code.
It is very unlikely that we would offer you a full time position on our engineering
team unless you&#39;ve had at least a few pull requests merged.</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="solidity">solidity</a>
          </div>
      </div>
    </div>
  </body>
</html>
