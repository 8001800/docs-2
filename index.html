
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
      <link href="images/navbar.png" rel="icon" type="image/png" />
    <title>MARKET Protocol</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
    <link href="https://fonts.googleapis.com/css?family=Work+Sans:400,500&amp;subset=latin-ext" rel="stylesheet">
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/market-logo.png" class="logo" alt="Market logo" />
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="introduction">Introduction</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#documentation" class="toc-h2 toc-link" data-title="documentation">Documentation</a>
                  </li>
                  <li>
                    <a href="#frequently-asked-questions" class="toc-h2 toc-link" data-title="frequently-asked-questions">Frequently Asked Questions</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#solidity-smart-contracts" class="toc-h1 toc-link" data-title="solidity-smart-contracts">Solidity Smart Contracts</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#market-contract" class="toc-h2 toc-link" data-title="market-contract">Market Contract</a>
                  </li>
                  <li>
                    <a href="#market-contract-oraclize" class="toc-h2 toc-link" data-title="market-contract-oraclize">Market Contract Oraclize</a>
                  </li>
                  <li>
                    <a href="#market-collateral-pool" class="toc-h2 toc-link" data-title="market-collateral-pool">Market Collateral Pool</a>
                  </li>
                  <li>
                    <a href="#factory-deployment" class="toc-h2 toc-link" data-title="factory-deployment">Factory deployment</a>
                  </li>
                  <li>
                    <a href="#collateral" class="toc-h2 toc-link" data-title="collateral">Collateral</a>
                  </li>
                  <li>
                    <a href="#orders" class="toc-h2 toc-link" data-title="orders">Orders</a>
                  </li>
                  <li>
                    <a href="#trading" class="toc-h2 toc-link" data-title="trading">Trading</a>
                  </li>
                  <li>
                    <a href="#market-contract-registry" class="toc-h2 toc-link" data-title="market-contract-registry">Market Contract Registry</a>
                  </li>
                  <li>
                    <a href="#mkt-tokens" class="toc-h2 toc-link" data-title="mkt-tokens">MKT Tokens</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#market-js" class="toc-h1 toc-link" data-title="market-js">MARKET.js</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#order-life-cycle" class="toc-h2 toc-link" data-title="order-life-cycle">Order Life Cycle</a>
                  </li>
                  <li>
                    <a href="#requirements-for-a-successful-traderorder-call" class="toc-h2 toc-link" data-title="requirements-for-a-successful-code-traderorder-code-call">Requirements for a successful <code>traderOrder</code> call</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#tutorial-1-orders" class="toc-h1 toc-link" data-title="tutorial-1-orders">Tutorial #1 - Orders</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#installation" class="toc-h2 toc-link" data-title="installation">Installation</a>
                  </li>
                  <li>
                    <a href="#development-environment" class="toc-h2 toc-link" data-title="development-environment">Development Environment</a>
                  </li>
                  <li>
                    <a href="#essential-packages" class="toc-h2 toc-link" data-title="essential-packages">Essential packages</a>
                  </li>
                  <li>
                    <a href="#instantiation" class="toc-h2 toc-link" data-title="instantiation">Instantiation</a>
                  </li>
                  <li>
                    <a href="#contract-specifications" class="toc-h2 toc-link" data-title="contract-specifications">Contract Specifications</a>
                  </li>
                  <li>
                    <a href="#collateral" class="toc-h2 toc-link" data-title="collateral">Collateral</a>
                  </li>
                  <li>
                    <a href="#order-creation" class="toc-h2 toc-link" data-title="order-creation">Order Creation</a>
                  </li>
                  <li>
                    <a href="#filling-an-order" class="toc-h2 toc-link" data-title="filling-an-order">Filling an Order</a>
                  </li>
                  <li>
                    <a href="#open-positions" class="toc-h2 toc-link" data-title="open-positions">Open Positions</a>
                  </li>
                  <li>
                    <a href="#remaining-balances" class="toc-h2 toc-link" data-title="remaining-balances">Remaining Balances</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#dapp" class="toc-h1 toc-link" data-title="dapp">dApp</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#using-an-ethereum-enabled-browser" class="toc-h2 toc-link" data-title="using-an-ethereum-enabled-browser">Using an Ethereum-enabled browser</a>
                  </li>
                  <li>
                    <a href="#acquire-test-eth" class="toc-h2 toc-link" data-title="acquire-test-eth">Acquire Test ETH</a>
                  </li>
                  <li>
                    <a href="#contract-deployment" class="toc-h2 toc-link" data-title="contract-deployment">Contract Deployment</a>
                  </li>
                  <li>
                    <a href="#explore-contracts" class="toc-h2 toc-link" data-title="explore-contracts">Explore Contracts</a>
                  </li>
                  <li>
                    <a href="#find-contracts" class="toc-h2 toc-link" data-title="find-contracts">Find Contracts</a>
                  </li>
                  <li>
                    <a href="#test-query" class="toc-h2 toc-link" data-title="test-query">Test Query</a>
                  </li>
                  <li>
                    <a href="#simulated-exchange" class="toc-h2 toc-link" data-title="simulated-exchange">Simulated Exchange</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#faq-general" class="toc-h1 toc-link" data-title="faq-general">FAQ - General</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#what-blockchain-is-used" class="toc-h2 toc-link" data-title="what-blockchain-is-used">What blockchain is used?</a>
                  </li>
                  <li>
                    <a href="#what-is-the-token-name" class="toc-h2 toc-link" data-title="what-is-the-token-name">What is the token name?</a>
                  </li>
                  <li>
                    <a href="#what-is-the-token-ticker-symbol" class="toc-h2 toc-link" data-title="what-is-the-token-ticker-symbol">What is the token ticker symbol?</a>
                  </li>
                  <li>
                    <a href="#how-can-i-receive-updates-from-market-protocol" class="toc-h2 toc-link" data-title="how-can-i-receive-updates-from-market-protocol">How can I receive updates from MARKET Protocol?</a>
                  </li>
                  <li>
                    <a href="#what-39-s-the-total-supply-of-the-token" class="toc-h2 toc-link" data-title="what-s-the-total-supply-of-the-token">What's the total supply of the token?</a>
                  </li>
                  <li>
                    <a href="#can-extra-mkt-tokens-be-added-to-the-total-supply" class="toc-h2 toc-link" data-title="can-extra-mkt-tokens-be-added-to-the-total-supply">Can extra MKT Tokens be added to the total supply?</a>
                  </li>
                  <li>
                    <a href="#can-you-mine-the-tokens" class="toc-h2 toc-link" data-title="can-you-mine-the-tokens">Can you mine the tokens?</a>
                  </li>
                  <li>
                    <a href="#what-wallet-should-i-use-to-keep-my-mkt-tokens" class="toc-h2 toc-link" data-title="what-wallet-should-i-use-to-keep-my-mkt-tokens">What wallet should I use to keep my MKT tokens?</a>
                  </li>
                  <li>
                    <a href="#when-will-the-main-net-launch-occur" class="toc-h2 toc-link" data-title="when-will-the-main-net-launch-occur">When will the main net launch occur?</a>
                  </li>
                  <li>
                    <a href="#what-are-the-official-chat-channels-and-links" class="toc-h2 toc-link" data-title="what-are-the-official-chat-channels-and-links">What are the official chat channels and links?</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#faq-market-protocol" class="toc-h1 toc-link" data-title="faq-market-protocol">FAQ - MARKET Protocol</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#what-is-a-derivative" class="toc-h2 toc-link" data-title="what-is-a-derivative">What is a derivative?</a>
                  </li>
                  <li>
                    <a href="#are-you-a-decentralized-exchange" class="toc-h2 toc-link" data-title="are-you-a-decentralized-exchange">Are you a decentralized exchange?</a>
                  </li>
                  <li>
                    <a href="#who-will-host-market-39-s-order-books" class="toc-h2 toc-link" data-title="who-will-host-market-s-order-books">Who will host MARKET's order books?</a>
                  </li>
                  <li>
                    <a href="#does-market-charge-a-fee-to-use-the-protocol" class="toc-h2 toc-link" data-title="does-market-charge-a-fee-to-use-the-protocol">Does MARKET charge a fee to use the protocol?</a>
                  </li>
                  <li>
                    <a href="#how-is-the-needed-collateral-for-an-open-position-calculated" class="toc-h2 toc-link" data-title="how-is-the-needed-collateral-for-an-open-position-calculated">How is the needed collateral for an open position calculated?</a>
                  </li>
                  <li>
                    <a href="#if-i-want-to-open-a-short-position-do-i-need-to-borrow-the-asset" class="toc-h2 toc-link" data-title="if-i-want-to-open-a-short-position-do-i-need-to-borrow-the-asset">If I want to open a short position do I need to borrow the asset?</a>
                  </li>
                  <li>
                    <a href="#when-is-my-collateral-returned-to-me-and-able-to-be-withdrawn" class="toc-h2 toc-link" data-title="when-is-my-collateral-returned-to-me-and-able-to-be-withdrawn">When is my collateral returned to me and able to be withdrawn?</a>
                  </li>
                  <li>
                    <a href="#what-happens-if-i-hold-an-open-position-through-contract-expiration" class="toc-h2 toc-link" data-title="what-happens-if-i-hold-an-open-position-through-contract-expiration">What happens if I hold an open position through contract expiration?</a>
                  </li>
                  <li>
                    <a href="#when-i-trade-out-of-an-open-position-how-is-my-profit-or-loss-allocated" class="toc-h2 toc-link" data-title="when-i-trade-out-of-an-open-position-how-is-my-profit-or-loss-allocated">When I trade out of an open position, how is my profit or loss allocated?</a>
                  </li>
                  <li>
                    <a href="#can-a-contract-be-created-based-on-a-different-blockchain-or-off-chain-asset" class="toc-h2 toc-link" data-title="can-a-contract-be-created-based-on-a-different-blockchain-or-off-chain-asset">Can a contract be created based on a different blockchain or off chain asset?</a>
                  </li>
                  <li>
                    <a href="#do-you-have-a-white-paper-available" class="toc-h2 toc-link" data-title="do-you-have-a-white-paper-available">Do you have a white paper available?</a>
                  </li>
                  <li>
                    <a href="#how-will-disputes-be-resolved" class="toc-h2 toc-link" data-title="how-will-disputes-be-resolved">How will disputes be resolved?</a>
                  </li>
                  <li>
                    <a href="#how-do-i-get-involved" class="toc-h2 toc-link" data-title="how-do-i-get-involved">How do I get involved?</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#faq-solidity-smart-contracts" class="toc-h1 toc-link" data-title="faq-solidity-smart-contracts">FAQ - Solidity Smart Contracts</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#how-to-debug-market-protocol-tests" class="toc-h2 toc-link" data-title="how-to-debug-market-protocol-tests">How to debug MARKET Protocol tests?</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#faq-api" class="toc-h1 toc-link" data-title="faq-api">FAQ - API</a>
          </li>
          <li>
            <a href="#faq-dapp" class="toc-h1 toc-link" data-title="faq-dapp">FAQ - dApp</a>
          </li>
          <li>
            <a href="#getting-help" class="toc-h1 toc-link" data-title="getting-help">Getting help</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#discord" class="toc-h2 toc-link" data-title="discord">Discord</a>
                  </li>
                  <li>
                    <a href="#email" class="toc-h2 toc-link" data-title="email">Email</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#contributing" class="toc-h1 toc-link" data-title="contributing">Contributing</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#dive-right-in" class="toc-h2 toc-link" data-title="dive-right-in">Dive Right In</a>
                  </li>
                  <li>
                    <a href="#development-process" class="toc-h2 toc-link" data-title="development-process">Development Process</a>
                  </li>
                  <li>
                    <a href="#gitcoin-and-bounties" class="toc-h2 toc-link" data-title="gitcoin-and-bounties">Gitcoin and Bounties</a>
                  </li>
                  <li>
                    <a href="#coding-style" class="toc-h2 toc-link" data-title="coding-style">Coding Style</a>
                  </li>
                  <li>
                    <a href="#git-flow" class="toc-h2 toc-link" data-title="git-flow">Git Flow</a>
                  </li>
                  <li>
                    <a href="#community-guidelines" class="toc-h2 toc-link" data-title="community-guidelines">Community Guidelines</a>
                  </li>
                  <li>
                    <a href="#engineering-weekly" class="toc-h2 toc-link" data-title="engineering-weekly">Engineering Weekly</a>
                  </li>
                  <li>
                    <a href="#community-improvement" class="toc-h2 toc-link" data-title="community-improvement">Community Improvement</a>
                  </li>
                  <li>
                    <a href="#full-time-positions" class="toc-h2 toc-link" data-title="full-time-positions">Full Time Positions</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#bug-reporting" class="toc-h1 toc-link" data-title="bug-reporting">Bug Reporting</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#what-39-s-github" class="toc-h2 toc-link" data-title="what-s-github">What's GitHub?</a>
                  </li>
                  <li>
                    <a href="#create-a-github-account" class="toc-h2 toc-link" data-title="create-a-github-account">Create a GitHub account</a>
                  </li>
                  <li>
                    <a href="#creating-a-bug-report" class="toc-h2 toc-link" data-title="creating-a-bug-report">Creating a Bug Report</a>
                  </li>
                  <li>
                    <a href="#security-issues" class="toc-h2 toc-link" data-title="security-issues">Security Issues</a>
                  </li>
              </ul>
          </li>
      </div>
        <ul class="toc-footer">
            <li><a href='https://marketprotocol.io/'>Home</a></li>
            <li><a href='https://dapp.marketprotocol.io/'>dApp</a></li>
            <li><a href='https://marketprotocol.io/assets/MARKET_Protocol-Whitepaper.pdf'>Whitepaper</a></li>
            <li><a href='https://github.com/MARKETProtocol/'>GitHub</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Welcome to MARKET Protocol documentation here you will find documentation for our smart contracts and APIs.</p>

<p>MARKET Protocol has been created to provide a secure, flexible, open source foundation for decentralized trading on the
Ethereum blockchain. We provide the pieces necessary to create a decentralized exchange, including the requisite
clearing and collateral pool infrastructure, enabling third parties to build applications for trading.</p>

<blockquote>
<p>Visit our Github: <a href="https://github.com/MARKETProtocol">https://github.com/MARKETProtocol</a></p>
</blockquote>

<p><a href="https://raw.githubusercontent.com/MARKETProtocol/assets/master/Schematics/MARKET_Protocol-TradeFlow.png"><img src="https://raw.githubusercontent.com/MARKETProtocol/assets/master/Schematics/MARKET_Protocol-TradeFlow.png" alt="Trade Flow" /></a></p>
<h2 id='documentation'>Documentation</h2>
<ul>
<li><a href="#solidity-smart-contracts">Smart Contracts</a>: The underlying MARKET Protocol smart contracts</li>
<li><a href="#market-js">MARKET.js</a>: Typescript ibrary to interact with MARKET Protocol</li>
<li><a href="#dapp">dApp</a>: Decentralized application allowing for easy MARKET Protocol contract deployment and exploration</li>
</ul>
<h2 id='frequently-asked-questions'>Frequently Asked Questions</h2>
<ul>
<li><a href="#faq-general">General FAQ</a></li>
<li><a href="#faq-market-protocol">MARKET Protocol FAQ</a></li>
<li><a href="#faq-solidity-smart-contracts">Smart Contract FAQ</a></li>
<li><a href="#faq-api">API FAQ</a></li>
<li><a href="#faq-dapp">dApp FAQ</a></li>
</ul>
<h1 id='solidity-smart-contracts'>Solidity Smart Contracts</h1>
<p>All code for our smart contracts can be found <a href="https://github.com/MARKETProtocol/MARKETProtocol">here</a>. If you have any
issues to report please do so by opening an issue on <a href="https://github.com/MARKETProtocol/MARKETProtocol/issues">GitHub</a>.</p>
<h2 id='market-contract'>Market Contract</h2>
<blockquote>
<p>MarketContract constructor:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="c1">/// @param contractName viewable name of this contract (BTC/ETH, LTC/ETH, etc)</span>
<span class="c1">/// @param creatorAddress address of the person creating the contract</span>
<span class="c1">/// @param marketTokenAddress address of our member token</span>
<span class="c1">/// @param collateralTokenAddress address of the ERC20 token that will be used for collateral and pricing</span>
<span class="c1">/// @param collateralPoolFactoryAddress address of the factory creating the collateral pools</span>
<span class="c1">/// @param contractSpecs array of unsigned integers including:</span>
<span class="c1">/// floorPrice minimum tradeable price of this contract, contract enters settlement if breached</span>
<span class="c1">/// capPrice maximum tradeable price of this contract, contract enters settlement if breached</span>
<span class="c1">/// priceDecimalPlaces number of decimal places to convert our queried price from a floating point to</span>
<span class="c1">/// an integer</span>
<span class="c1">/// qtyMultiplier multiply traded qty by this value from base units of collateral token.</span>
<span class="c1">/// expirationTimeStamp - seconds from epoch that this contract expires and enters settlement</span>
<span class="nx">constructor</span><span class="p">(</span>
    <span class="nx">string</span> <span class="nx">contractName</span><span class="p">,</span>
    <span class="nx">address</span> <span class="nx">creatorAddress</span><span class="p">,</span>
    <span class="nx">address</span> <span class="nx">marketTokenAddress</span><span class="p">,</span>
    <span class="nx">address</span> <span class="nx">collateralTokenAddress</span><span class="p">,</span>
    <span class="nx">address</span> <span class="nx">collateralPoolFactoryAddress</span><span class="p">,</span>
    <span class="nx">uint</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="nx">contractSpecs</span>
<span class="p">)</span> <span class="kr">public</span>
<span class="p">{</span>
    <span class="nx">COLLATERAL_POOL_FACTORY_ADDRESS</span> <span class="o">=</span> <span class="nx">collateralPoolFactoryAddress</span><span class="p">;</span>
    <span class="nx">MKT_TOKEN_ADDRESS</span> <span class="o">=</span> <span class="nx">marketTokenAddress</span><span class="p">;</span>
    <span class="nx">MKT_TOKEN</span> <span class="o">=</span> <span class="nx">MarketToken</span><span class="p">(</span><span class="nx">marketTokenAddress</span><span class="p">);</span>
    <span class="nx">require</span><span class="p">(</span><span class="nx">MKT_TOKEN</span><span class="p">.</span><span class="nx">isBalanceSufficientForContractCreation</span><span class="p">(</span><span class="nx">msg</span><span class="p">.</span><span class="nx">sender</span><span class="p">));</span>    <span class="c1">// creator must be MKT holder</span>
    <span class="nx">PRICE_FLOOR</span> <span class="o">=</span> <span class="nx">contractSpecs</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="nx">PRICE_CAP</span> <span class="o">=</span> <span class="nx">contractSpecs</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
    <span class="nx">require</span><span class="p">(</span><span class="nx">PRICE_CAP</span> <span class="o">&gt;</span> <span class="nx">PRICE_FLOOR</span><span class="p">);</span>

    <span class="nx">PRICE_DECIMAL_PLACES</span> <span class="o">=</span> <span class="nx">contractSpecs</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
    <span class="nx">QTY_MULTIPLIER</span> <span class="o">=</span> <span class="nx">contractSpecs</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
    <span class="nx">EXPIRATION</span> <span class="o">=</span> <span class="nx">contractSpecs</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
    <span class="nx">require</span><span class="p">(</span><span class="nx">EXPIRATION</span> <span class="o">&gt;</span> <span class="nx">now</span><span class="p">);</span>

    <span class="nx">CONTRACT_NAME</span> <span class="o">=</span> <span class="nx">contractName</span><span class="p">;</span>
    <span class="nx">COLLATERAL_TOKEN_ADDRESS</span> <span class="o">=</span> <span class="nx">collateralTokenAddress</span><span class="p">;</span>
    <span class="nx">creator</span> <span class="o">=</span> <span class="nx">creatorAddress</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<p>The <code>MarketContract</code> represents the main contract responsible for 
combining needed functionality for trading, settlement and position management.  Each <code>MarketContract</code> 
must be paired with a unique <code>MarketCollateralPool</code> (<a href="#collateral-pool">see below</a>) after instantiation in order to allow trading to become
enabled.</p>

<p><a href="https://raw.githubusercontent.com/MARKETProtocol/assets/master/Schematics/MARKET_Protocol-SmartContracts.png"><img src="https://raw.githubusercontent.com/MARKETProtocol/assets/master/Schematics/MARKET_Protocol-SmartContracts.png" alt="Contract Diagram" /></a></p>

<p><code>MarketContract</code> is an abstract contract that will allow for implementing 
classes such as <code>MarketContractOraclize</code> to complete the needed top level functionality around oracle solutions.
We intend to expand our offering of oracle solutions offered in the near future.  </p>

<aside class="notice">
If there are oracle services that
you would like to submit for possible inclusion in these future plans, please email info@marketprotocol.io
</aside>
<h3 id='oracle-costs'>Oracle Costs</h3>
<p>The <code>Creator</code> of the <code>MarketContract</code> must pre-fund the contract with enough ETH in order to pay for the gas costs
associated with the needed oracle query.  Currently from Oraclize.it - the first query for any contract is free,
so this need has been removed.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>contractName</td>
<td>viewable name of this contract, in the future we will implement suggested naming conventions</td>
</tr>
<tr>
<td>marketTokenAddress</td>
<td>address of the MKT deployed ERC20 token</td>
</tr>
<tr>
<td>collateralTokenAddress</td>
<td>address of the ERC20 token that will be used for collateral</td>
</tr>
<tr>
<td>contractSpecs</td>
<td>array of unsigned integers including the below parameters</td>
</tr>
<tr>
<td>floorPrice</td>
<td>minimum tradeable price of this contract</td>
</tr>
<tr>
<td>capPrice</td>
<td>maximum tradeable price of this contract</td>
</tr>
<tr>
<td>expirationTimeStamp</td>
<td>seconds from epoch that this contract expires and enters settlement</td>
</tr>
</tbody></table>
<h2 id='market-contract-oraclize'>Market Contract Oraclize</h2>
<blockquote>
<p>MarketContractOraclize constructor:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="c1">/// @param contractName viewable name of this contract (BTC/ETH, LTC/ETH, etc)</span>
<span class="c1">/// @param creatorAddress address of the person creating the contract</span>
<span class="c1">/// @param marketTokenAddress address of our member token</span>
<span class="c1">/// @param collateralTokenAddress address of the ERC20 token that will be used for collateral and pricing</span>
<span class="c1">/// @param collateralPoolFactoryAddress address of the factory creating the collateral pools</span>
<span class="c1">/// @param contractSpecs array of unsigned integers including:</span>
<span class="c1">/// floorPrice minimum tradeable price of this contract, contract enters settlement if breached</span>
<span class="c1">/// capPrice maximum tradeable price of this contract, contract enters settlement if breached</span>
<span class="c1">/// priceDecimalPlaces number of decimal places to convert our queried price from a floating point to</span>
<span class="c1">/// an integer</span>
<span class="c1">/// qtyMultiplier multiply traded qty by this value from base units of collateral token.</span>
<span class="c1">/// expirationTimeStamp - seconds from epoch that this contract expires and enters settlement</span>
<span class="c1">/// @param oracleDataSource a data-source such as "URL", "WolframAlpha", "IPFS"</span>
<span class="c1">/// see http://docs.oraclize.it/#ethereum-quick-start-simple-query</span>
<span class="c1">/// @param oracleQuery see http://docs.oraclize.it/#ethereum-quick-start-simple-query for examples</span>
<span class="nx">constructor</span><span class="p">(</span>
    <span class="nx">string</span> <span class="nx">contractName</span><span class="p">,</span>
    <span class="nx">address</span> <span class="nx">creatorAddress</span><span class="p">,</span>
    <span class="nx">address</span> <span class="nx">marketTokenAddress</span><span class="p">,</span>
    <span class="nx">address</span> <span class="nx">collateralTokenAddress</span><span class="p">,</span>
    <span class="nx">address</span> <span class="nx">collateralPoolFactoryAddress</span><span class="p">,</span>
    <span class="nx">uint</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="nx">contractSpecs</span><span class="p">,</span>
    <span class="nx">string</span> <span class="nx">oracleDataSource</span><span class="p">,</span>
    <span class="nx">string</span> <span class="nx">oracleQuery</span>
<span class="p">)</span> <span class="nx">MarketContract</span><span class="p">(</span>
    <span class="nx">contractName</span><span class="p">,</span>
    <span class="nx">creatorAddress</span><span class="p">,</span>
    <span class="nx">marketTokenAddress</span><span class="p">,</span>
    <span class="nx">collateralTokenAddress</span><span class="p">,</span>
    <span class="nx">collateralPoolFactoryAddress</span><span class="p">,</span>
    <span class="nx">contractSpecs</span>
<span class="p">)</span>  <span class="kr">public</span>
<span class="p">{</span>
    <span class="nx">oraclize_setProof</span><span class="p">(</span><span class="nx">proofType_TLSNotary</span> <span class="o">|</span> <span class="nx">proofStorage_IPFS</span><span class="p">);</span>
    <span class="nx">ORACLE_DATA_SOURCE</span> <span class="o">=</span> <span class="nx">oracleDataSource</span><span class="p">;</span>
    <span class="nx">ORACLE_QUERY</span> <span class="o">=</span> <span class="nx">oracleQuery</span><span class="p">;</span>
    <span class="nx">require</span><span class="p">(</span><span class="nx">EXPIRATION</span> <span class="o">&gt;</span> <span class="nx">now</span><span class="p">);</span>         <span class="c1">// Require expiration time in the future.</span>

    <span class="c1">// Future timestamp must be within 60 days from now.</span>
    <span class="c1">// https://docs.oraclize.it/#ethereum-quick-start-schedule-a-query-in-the-future</span>
    <span class="nx">uint</span> <span class="nx">secondsPerSixtyDays</span> <span class="o">=</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">24</span> <span class="o">*</span> <span class="mi">60</span><span class="p">;</span>
    <span class="nx">require</span><span class="p">(</span><span class="nx">EXPIRATION</span> <span class="o">-</span> <span class="nx">now</span> <span class="o">&lt;=</span> <span class="nx">secondsPerSixtyDays</span><span class="p">);</span>
    <span class="nx">queryOracle</span><span class="p">();</span>                      <span class="c1">// Schedule a call to oracle at contract expiration time.</span>
<span class="p">}</span>
</code></pre>
<p><code>MarketContractOraclize</code> is the first fully implemented <code>MarketContract</code> that has been built out.  Using 
<a href="http://www.oraclize.it/">Oraclize.it</a> allows for several different sources of truth in order to settle contracts.
More information on forming correct queries can 
be found in their <a href="http://docs.oraclize.it/#ethereum-quick-start-simple-query">documentation</a>.</p>

<p>Our <a href="https://app.marketprotocol.io">dApp</a> additionally has some help in formatting your queries correctly
and a test environment to ensure the queries are correct prior to contract deployment.</p>
<h3 id='additional-parameters'>Additional parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>oracleDataSource</td>
<td>a data-source such as &quot;URL&quot;, &quot;WolframAlpha&quot;, &quot;IPFS&quot;</td>
</tr>
<tr>
<td>oracleQuery</td>
<td>properly formatted Oraclize.it query</td>
</tr>
</tbody></table>
<h2 id='market-collateral-pool'>Market Collateral Pool</h2>
<blockquote>
<p>MarketCollateralPool constructor:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="c1">/// @dev instantiates a collateral pool that is unique to the supplied address of a MarketContract. This pairing</span>
<span class="c1">/// is 1:1</span>
<span class="c1">/// @param marketContractAddress deployed address of a MarketContract</span>
<span class="nx">constructor</span><span class="p">(</span><span class="nx">address</span> <span class="nx">marketContractAddress</span><span class="p">)</span> <span class="nx">Linkable</span><span class="p">(</span><span class="nx">marketContractAddress</span><span class="p">)</span> <span class="kr">public</span> <span class="p">{</span>
    <span class="nx">MKT_CONTRACT</span> <span class="o">=</span> <span class="nx">MarketContract</span><span class="p">(</span><span class="nx">marketContractAddress</span><span class="p">);</span>
    <span class="nx">MKT_TOKEN_ADDRESS</span> <span class="o">=</span> <span class="nx">MKT_CONTRACT</span><span class="p">.</span><span class="nx">MKT_TOKEN_ADDRESS</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>
<p>The <code>MarketCollateralPool</code> is a contract controlled by a specific <code>MarketContract</code>.  It holds users balances, 
locked collateral balances and open positions accounting.  These balances and positions are unique to the linked 
<code>MarketContract</code> and a user must deposit funds for each <code>MarketContract</code> they intend to trade.  The ERC20 Token
specified are the only accepted form of funding or collateralization.</p>
<h2 id='factory-deployment'>Factory deployment</h2>
<blockquote>
<p>MarketContractOraclize factory for deployment:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="c1">/// @dev Deploys a new instance of a market contract and adds it to the whitelist.</span>
<span class="c1">/// @param contractName viewable name of this contract (BTC/ETH, LTC/ETH, etc)</span>
<span class="c1">/// @param collateralTokenAddress address of the ERC20 token that will be used for collateral and pricing</span>
<span class="c1">/// @param contractSpecs array of unsigned integers including:</span>
<span class="c1">/// floorPrice minimum tradeable price of this contract, contract enters settlement if breached</span>
<span class="c1">/// capPrice maximum tradeable price of this contract, contract enters settlement if breached</span>
<span class="c1">/// priceDecimalPlaces number of decimal places to convert our queried price from a floating point to</span>
<span class="c1">/// an integer</span>
<span class="c1">/// qtyMultiplier multiply traded qty by this value from base units of collateral token.</span>
<span class="c1">/// expirationTimeStamp - seconds from epoch that this contract expires and enters settlement</span>
<span class="c1">/// @param oracleDataSource a data-source such as "URL", "WolframAlpha", "IPFS"</span>
<span class="c1">/// see http://docs.oraclize.it/#ethereum-quick-start-simple-query</span>
<span class="c1">/// @param oracleQuery see http://docs.oraclize.it/#ethereum-quick-start-simple-query for examples</span>
<span class="kd">function</span> <span class="nx">deployMarketContractOraclize</span><span class="p">(</span>
    <span class="nx">string</span> <span class="nx">contractName</span><span class="p">,</span>
    <span class="nx">address</span> <span class="nx">collateralTokenAddress</span><span class="p">,</span>
    <span class="nx">uint</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="nx">contractSpecs</span><span class="p">,</span>
    <span class="nx">string</span> <span class="nx">oracleDataSource</span><span class="p">,</span>
    <span class="nx">string</span> <span class="nx">oracleQuery</span>
<span class="p">)</span> <span class="nx">external</span>
<span class="p">{</span>
    <span class="nx">MarketContractOraclize</span> <span class="nx">mktContract</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MarketContractOraclize</span><span class="p">(</span>
        <span class="nx">contractName</span><span class="p">,</span>
        <span class="nx">msg</span><span class="p">.</span><span class="nx">sender</span><span class="p">,</span>
        <span class="nx">MKT_TOKEN_ADDRESS</span><span class="p">,</span>
        <span class="nx">collateralTokenAddress</span><span class="p">,</span>
        <span class="nx">collateralPoolFactoryAddress</span><span class="p">,</span>
        <span class="nx">contractSpecs</span><span class="p">,</span>
        <span class="nx">oracleDataSource</span><span class="p">,</span>
        <span class="nx">oracleQuery</span>
    <span class="p">);</span>
    <span class="nx">MarketContractRegistryInterface</span><span class="p">(</span><span class="nx">marketContractRegistry</span><span class="p">).</span><span class="nx">addAddressToWhiteList</span><span class="p">(</span><span class="nx">mktContract</span><span class="p">);</span>
    <span class="nx">emit</span> <span class="nx">MarketContractCreated</span><span class="p">(</span><span class="nx">address</span><span class="p">(</span><span class="nx">mktContract</span><span class="p">));</span>
<span class="p">}</span>
</code></pre>
<blockquote>
<p>MarketCollateralPool factory for deployment:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="c1">/// @dev creates the needed collateral pool and links it to our market contract.</span>
<span class="c1">/// @param marketContractAddress address of the newly deployed market contract.</span>
<span class="kd">function</span> <span class="nx">deployMarketCollateralPool</span><span class="p">(</span><span class="nx">address</span> <span class="nx">marketContractAddress</span><span class="p">)</span> <span class="nx">external</span> <span class="p">{</span>
    <span class="nx">require</span><span class="p">(</span><span class="nx">MarketContractRegistryInterface</span><span class="p">(</span><span class="nx">marketContractRegistry</span><span class="p">).</span><span class="nx">isAddressWhiteListed</span><span class="p">(</span><span class="nx">marketContractAddress</span><span class="p">));</span>
    <span class="nx">MarketCollateralPool</span> <span class="nx">marketCollateralPool</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MarketCollateralPool</span><span class="p">(</span><span class="nx">marketContractAddress</span><span class="p">);</span>
    <span class="nx">MarketContract</span><span class="p">(</span><span class="nx">marketContractAddress</span><span class="p">).</span><span class="nx">setCollateralPoolContractAddress</span><span class="p">(</span><span class="nx">marketCollateralPool</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
<p>Currently two factories exist to aid in the deployment of linked contracts and the whitelisting of these contracts in 
the <a href="#market-contract-registry"><code>MarketContractRegistry</code></a>, which holds a record of all currently deployed and functional
contracts.</p>
<h3 id='marketcontractoraclize-deployment'>MarketContractOraclize deployment</h3>
<p>First, a user calls <code>deployMarketContractOraclize</code> on the <code>MarketContractFactoryOraclize</code> in order to begin
the deployment process.</p>

<p>This function call creates the new MarketContractOraclize and then adds the address to the <code>MarketContractRegistry</code> so
that others may find the contract for trading. A second call to the <code>deployMarketCollateralPool</code> of the 
<code>MarketCollateralPoolFactory</code> then deploys the needed <code>MarketCollateralPool</code> and links it to the <code>MarketContract</code>.
At this point the contract is ready to be traded.</p>
<h2 id='collateral'>Collateral</h2><h3 id='depositing-funds-for-trading'>Depositing funds for trading</h3>
<blockquote>
<p>depositTokensForTrading function</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="c1">/// @notice deposits tokens to the smart contract to fund the user account and provide needed tokens for collateral</span>
<span class="c1">/// pool upon trade matching.</span>
<span class="c1">/// @param depositAmount qty of ERC20 tokens to deposit to the smart contract to cover open orders and collateral</span>
<span class="kd">function</span> <span class="nx">depositTokensForTrading</span><span class="p">(</span><span class="nx">uint256</span> <span class="nx">depositAmount</span><span class="p">)</span> <span class="nx">external</span> <span class="p">{</span>
    <span class="c1">// user must call approve!</span>
    <span class="nx">require</span><span class="p">(</span><span class="nx">MarketToken</span><span class="p">(</span><span class="nx">MKT_TOKEN_ADDRESS</span><span class="p">).</span><span class="nx">isUserEnabledForContract</span><span class="p">(</span><span class="nx">MKT_CONTRACT</span><span class="p">,</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">sender</span><span class="p">));</span>
    <span class="nx">uint256</span> <span class="nx">balanceAfterDeposit</span> <span class="o">=</span> <span class="nx">userAddressToAccountBalance</span><span class="p">[</span><span class="nx">msg</span><span class="p">.</span><span class="nx">sender</span><span class="p">].</span><span class="nx">add</span><span class="p">(</span><span class="nx">depositAmount</span><span class="p">);</span>
    <span class="nx">ERC20</span><span class="p">(</span><span class="nx">MKT_CONTRACT</span><span class="p">.</span><span class="nx">COLLATERAL_TOKEN_ADDRESS</span><span class="p">()).</span><span class="nx">safeTransferFrom</span><span class="p">(</span><span class="nx">msg</span><span class="p">.</span><span class="nx">sender</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="nx">depositAmount</span><span class="p">);</span>
    <span class="nx">userAddressToAccountBalance</span><span class="p">[</span><span class="nx">msg</span><span class="p">.</span><span class="nx">sender</span><span class="p">]</span> <span class="o">=</span> <span class="nx">balanceAfterDeposit</span><span class="p">;</span>
    <span class="nx">emit</span> <span class="nx">UpdatedUserBalance</span><span class="p">(</span><span class="nx">msg</span><span class="p">.</span><span class="nx">sender</span><span class="p">,</span> <span class="nx">balanceAfterDeposit</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
<p>Funds deposited by a user are allocated to their address&#39;s account balance until a point at which a new position is 
opened and the funds then become allocated to <code>collateralPoolBalance</code> and are locked until the user exits their
position or the contract expires.  In this way, all open positions are always fully collateralized eliminating any
counter party risk and ensuring the solvency of the contract.</p>
<h3 id='calculating-needed-collateral-and-maximum-possible-loss'>Calculating needed collateral and maximum possible loss</h3>
<blockquote>
<p>calculateNeededCollateral function</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="c1">/// @notice determines the amount of needed collateral for a given position (qty and price)</span>
<span class="c1">/// @param priceFloor lowest price the contract is allowed to trade before expiration</span>
<span class="c1">/// @param priceCap highest price the contract is allowed to trade before expiration</span>
<span class="c1">/// @param qtyMultiplier multiplier for qty from base units</span>
<span class="c1">/// @param qty signed integer corresponding to the traded quantity</span>
<span class="c1">/// @param price of the trade</span>
<span class="kd">function</span> <span class="nx">calculateNeededCollateral</span><span class="p">(</span>
    <span class="nx">uint</span> <span class="nx">priceFloor</span><span class="p">,</span>
    <span class="nx">uint</span> <span class="nx">priceCap</span><span class="p">,</span>
    <span class="nx">uint</span> <span class="nx">qtyMultiplier</span><span class="p">,</span>
    <span class="kr">int</span> <span class="nx">qty</span><span class="p">,</span>
    <span class="nx">uint</span> <span class="nx">price</span>
<span class="p">)</span> <span class="nx">pure</span> <span class="nx">internal</span> <span class="nx">returns</span> <span class="p">(</span><span class="nx">uint</span> <span class="nx">neededCollateral</span><span class="p">)</span>
<span class="p">{</span>

    <span class="nx">uint</span> <span class="nx">maxLoss</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">qty</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>   <span class="c1">// this qty is long, calculate max loss from entry price to floor</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">price</span> <span class="o">&lt;=</span> <span class="nx">priceFloor</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">maxLoss</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">maxLoss</span> <span class="o">=</span> <span class="nx">subtract</span><span class="p">(</span><span class="nx">price</span><span class="p">,</span> <span class="nx">priceFloor</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="c1">// this qty is short, calculate max loss from entry price to ceiling;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">price</span> <span class="o">&gt;=</span> <span class="nx">priceCap</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">maxLoss</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">maxLoss</span> <span class="o">=</span> <span class="nx">subtract</span><span class="p">(</span><span class="nx">priceCap</span><span class="p">,</span> <span class="nx">price</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="nx">neededCollateral</span> <span class="o">=</span> <span class="nx">maxLoss</span> <span class="o">*</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">qty</span><span class="p">)</span> <span class="o">*</span> <span class="nx">qtyMultiplier</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<p>The amount of funds that are allocated to the <code>collateralPoolBalance</code> upon entering a trade is defined by that positions
maximum possible loss.  </p>

<p>All positions are always fully collateralized, meaning the maximum possible loss for a position is the required 
amount of collateral to open that position. This can be calculated from the <code>price</code> and <code>qty</code> of the 
position and the defined specifications of the <code>MarketContract</code>.  </p>

<p>For a buyer, the maximum possible loss is calculated as the <code>price</code> of the 
trade minus the <code>priceFloor</code> times the qty transacted. Conversely, if you are opening a short position the maximum 
loss is calculated as <code>priceCap</code> minus the price of the trade, multiplied by the <code>qty</code> transacted. Upon filling an order 
both parties commit their respective maximum loss to the collateral pool.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>priceFloor</td>
<td>as defined in the <code>MarketContract</code></td>
</tr>
<tr>
<td>priceCap</td>
<td>as defined in the <code>MarketContract</code></td>
</tr>
<tr>
<td>qtyMultiplier</td>
<td>as defined in the <code>MarketContract</code></td>
</tr>
<tr>
<td>qty</td>
<td>signed integer corresponding to the traded quantity</td>
</tr>
<tr>
<td>price</td>
<td>agreed upon execution price</td>
</tr>
</tbody></table>
<h3 id='withdrawing-funds'>Withdrawing funds</h3>
<blockquote>
<p>withdrawTokens function</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="c1">/// @notice removes token from users trading account</span>
<span class="c1">/// @param withdrawAmount qty of token to attempt to withdraw</span>
<span class="kd">function</span> <span class="nx">withdrawTokens</span><span class="p">(</span><span class="nx">uint256</span> <span class="nx">withdrawAmount</span><span class="p">)</span> <span class="kr">public</span> <span class="p">{</span>
    <span class="c1">//require(userAddressToAccountBalance[msg.sender] &gt;= withdrawAmount);  subtract call below will enforce this</span>
    <span class="nx">uint256</span> <span class="nx">balanceAfterWithdrawal</span> <span class="o">=</span> <span class="nx">userAddressToAccountBalance</span><span class="p">[</span><span class="nx">msg</span><span class="p">.</span><span class="nx">sender</span><span class="p">].</span><span class="nx">subtract</span><span class="p">(</span><span class="nx">withdrawAmount</span><span class="p">);</span>
    <span class="nx">userAddressToAccountBalance</span><span class="p">[</span><span class="nx">msg</span><span class="p">.</span><span class="nx">sender</span><span class="p">]</span> <span class="o">=</span> <span class="nx">balanceAfterWithdrawal</span><span class="p">;</span>   <span class="c1">// update balance before external call!</span>
    <span class="nx">ERC20</span><span class="p">(</span><span class="nx">MKT_CONTRACT</span><span class="p">.</span><span class="nx">COLLATERAL_TOKEN_ADDRESS</span><span class="p">()).</span><span class="nx">safeTransfer</span><span class="p">(</span><span class="nx">msg</span><span class="p">.</span><span class="nx">sender</span><span class="p">,</span> <span class="nx">withdrawAmount</span><span class="p">);</span>
    <span class="nx">emit</span> <span class="nx">UpdatedUserBalance</span><span class="p">(</span><span class="nx">msg</span><span class="p">.</span><span class="nx">sender</span><span class="p">,</span> <span class="nx">balanceAfterWithdrawal</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
<p>At any time, tokens that are not allocated to an open position held by the user, are able to be withdrawn.</p>

<p>Upon exiting a position funds are returned to the user&#39;s account balance, net of any profit or loss.  Similarly,
if the contract expires with the user maintaining an open position, their position settles to the final settlement
price of the contract and funds are then eligible for immediate withdraw.</p>
<h2 id='orders'>Orders</h2>
<blockquote>
<p>MARKET&#39;s Order struct</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="nx">struct</span> <span class="nx">Order</span> <span class="p">{</span>
    <span class="nx">address</span> <span class="nx">maker</span><span class="p">;</span>
    <span class="nx">address</span> <span class="nx">taker</span><span class="p">;</span>
    <span class="nx">address</span> <span class="nx">feeRecipient</span><span class="p">;</span>
    <span class="nx">uint</span> <span class="nx">makerFee</span><span class="p">;</span>
    <span class="nx">uint</span> <span class="nx">takerFee</span><span class="p">;</span>
    <span class="nx">uint</span> <span class="nx">price</span><span class="p">;</span>
    <span class="nx">uint</span> <span class="nx">expirationTimeStamp</span><span class="p">;</span>
    <span class="kr">int</span> <span class="nx">qty</span><span class="p">;</span>
    <span class="nx">bytes32</span> <span class="nx">orderHash</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<blockquote>
<p>Generating and confirming Order signatures</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="c1">/// @notice creates the hash for the given order parameters.</span>
<span class="c1">/// @param contractAddress address of the calling contract, orders are unique to each contract</span>
<span class="c1">/// @param orderAddresses array of 3 address. maker, taker, and feeRecipient</span>
<span class="c1">/// @param unsignedOrderValues array of 5 unsigned integers. makerFee, takerFee, price, expirationTimeStamp and salt</span>
<span class="c1">/// @param orderQty signed qty of the original order.</span>
<span class="kd">function</span> <span class="nx">createOrderHash</span><span class="p">(</span>
    <span class="nx">address</span> <span class="nx">contractAddress</span><span class="p">,</span>
    <span class="nx">address</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="nx">orderAddresses</span><span class="p">,</span>
    <span class="nx">uint</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="nx">unsignedOrderValues</span><span class="p">,</span>
    <span class="kr">int</span> <span class="nx">orderQty</span>
<span class="p">)</span> <span class="kr">public</span> <span class="nx">pure</span> <span class="nx">returns</span> <span class="p">(</span><span class="nx">bytes32</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="nx">keccak256</span><span class="p">(</span>
        <span class="nx">abi</span><span class="p">.</span><span class="nx">encodePacked</span><span class="p">(</span>
            <span class="nx">contractAddress</span><span class="p">,</span>
            <span class="nx">orderAddresses</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="nx">orderAddresses</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
            <span class="nx">orderAddresses</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
            <span class="nx">unsignedOrderValues</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="nx">unsignedOrderValues</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
            <span class="nx">unsignedOrderValues</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
            <span class="nx">unsignedOrderValues</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
            <span class="nx">unsignedOrderValues</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span>
            <span class="nx">orderQty</span>
        <span class="p">)</span>
    <span class="p">);</span>
<span class="p">}</span>

<span class="c1">/// @notice confirms hash originated from signer</span>
<span class="c1">/// @param signerAddress - address of order originator</span>
<span class="c1">/// @param hash - original order hash</span>
<span class="c1">/// @param v order signature</span>
<span class="c1">/// @param r order signature</span>
<span class="c1">/// @param s order signature</span>
<span class="kd">function</span> <span class="nx">isValidSignature</span><span class="p">(</span>
    <span class="nx">address</span> <span class="nx">signerAddress</span><span class="p">,</span>
    <span class="nx">bytes32</span> <span class="nx">hash</span><span class="p">,</span>
    <span class="nx">uint8</span> <span class="nx">v</span><span class="p">,</span>
    <span class="nx">bytes32</span> <span class="nx">r</span><span class="p">,</span>
    <span class="nx">bytes32</span> <span class="nx">s</span>
<span class="p">)</span> <span class="kr">public</span> <span class="nx">pure</span> <span class="nx">returns</span> <span class="p">(</span><span class="nx">bool</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="nx">signerAddress</span> <span class="o">==</span> <span class="nx">ecrecover</span><span class="p">(</span>
        <span class="nx">keccak256</span><span class="p">(</span><span class="nx">abi</span><span class="p">.</span><span class="nx">encodePacked</span><span class="p">(</span><span class="s2">"\x19Ethereum Signed Message:\n32"</span><span class="p">,</span> <span class="nx">hash</span><span class="p">)),</span>
        <span class="nx">v</span><span class="p">,</span>
        <span class="nx">r</span><span class="p">,</span>
        <span class="nx">s</span>
    <span class="p">);</span>
<span class="p">}</span>
</code></pre>
<p>MARKET utilizes off chain orders to reduce the number of needed transactions that must occur on the blockchain.   Third 
party Nodes will provide order book hosting and aggregation services on top of the protocol to facilitate liquidity.
Orders however are cryptographically signed to ensure no manipulation and facilitate trust-less executions.</p>

<p>Makers create orders and sign them (making liquidity), while takers select signed orders 
to trade against (taking liquidity).  </p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>maker</td>
<td>address of user who originated and signed this order</td>
</tr>
<tr>
<td>taker</td>
<td>address of counter-party to fill order or <code>null</code> to allow any counter-party</td>
</tr>
<tr>
<td>feeRecipient</td>
<td>address of fee recipient node, if any (MARKET does not charge any fees, but nodes may)</td>
</tr>
<tr>
<td>makerFee</td>
<td>fee to paid by the maker in MKT tokens to the <code>feeRecipient</code></td>
</tr>
<tr>
<td>takerFee</td>
<td>fee to paid by the taker in MKT tokens to the <code>feeRecipient</code></td>
</tr>
<tr>
<td>price</td>
<td>agreed upon execution price</td>
</tr>
<tr>
<td>expirationTimeStamp</td>
<td>timestamp that the order is valid until</td>
</tr>
<tr>
<td>qty</td>
<td>agreed upon execution qty</td>
</tr>
<tr>
<td>orderHash</td>
<td>hash created by maker to ensure all order parameters are valid and originated from <code>maker</code></td>
</tr>
</tbody></table>

<p>A maker creates an order with the specified parameters and calls <code>createOrderHash</code> that is transmitted 
along with the order.  Any part can verify the veracity of the hash with <code>isValidSignature</code> which will match the
signer&#39;s address if all parameters of the order are valid.</p>

<p>Makers may cancel an order at any time, unfortunately this transaction happens on chain and will require gas to complete.
Alternatively, an <code>Order</code> can be created with an <code>expirationTimeStamp</code> expiring the order automatically without the
additional gas cost. </p>
<h2 id='trading'>Trading</h2><pre class="highlight javascript tab-javascript"><code><span class="c1">// @notice called by a participant wanting to trade a specific order</span>
<span class="c1">/// @param orderAddresses - maker, taker and feeRecipient addresses</span>
<span class="c1">/// @param unsignedOrderValues makerFee, takerFree, price, expirationTimeStamp, and salt (for hashing)</span>
<span class="c1">/// @param orderQty quantity of the order</span>
<span class="c1">/// @param qtyToFill quantity taker is willing to fill of original order(max)</span>
<span class="c1">/// @param v order signature</span>
<span class="c1">/// @param r order signature</span>
<span class="c1">/// @param s order signature</span>
<span class="kd">function</span> <span class="nx">tradeOrder</span><span class="p">(</span>
    <span class="nx">address</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="nx">orderAddresses</span><span class="p">,</span>
    <span class="nx">uint</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="nx">unsignedOrderValues</span><span class="p">,</span>
    <span class="kr">int</span> <span class="nx">orderQty</span><span class="p">,</span>
    <span class="kr">int</span> <span class="nx">qtyToFill</span><span class="p">,</span>
    <span class="nx">uint8</span> <span class="nx">v</span><span class="p">,</span>
    <span class="nx">bytes32</span> <span class="nx">r</span><span class="p">,</span>
    <span class="nx">bytes32</span> <span class="nx">s</span>
<span class="p">)</span> <span class="nx">external</span> <span class="nx">returns</span> <span class="p">(</span><span class="kr">int</span> <span class="nx">filledQty</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nx">require</span><span class="p">(</span><span class="nx">isCollateralPoolContractLinked</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">isSettled</span><span class="p">);</span> <span class="c1">// no trading past settlement</span>
    <span class="nx">require</span><span class="p">(</span><span class="nx">orderQty</span> <span class="o">!=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">qtyToFill</span> <span class="o">!=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">orderQty</span><span class="p">.</span><span class="nx">isSameSign</span><span class="p">(</span><span class="nx">qtyToFill</span><span class="p">));</span>   <span class="c1">// no zero trades, sings match</span>
    <span class="nx">require</span><span class="p">(</span><span class="nx">MKT_TOKEN</span><span class="p">.</span><span class="nx">isUserEnabledForContract</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">sender</span><span class="p">));</span>
    <span class="nx">OrderLib</span><span class="p">.</span><span class="nx">Order</span> <span class="nx">memory</span> <span class="nx">order</span> <span class="o">=</span> <span class="nx">address</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">createOrder</span><span class="p">(</span><span class="nx">orderAddresses</span><span class="p">,</span> <span class="nx">unsignedOrderValues</span><span class="p">,</span> <span class="nx">orderQty</span><span class="p">);</span>
    <span class="nx">require</span><span class="p">(</span><span class="nx">MKT_TOKEN</span><span class="p">.</span><span class="nx">isUserEnabledForContract</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">order</span><span class="p">.</span><span class="nx">maker</span><span class="p">));</span>

    <span class="c1">// taker can be anyone, or specifically the caller!</span>
    <span class="nx">require</span><span class="p">(</span><span class="nx">order</span><span class="p">.</span><span class="nx">taker</span> <span class="o">==</span> <span class="nx">address</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">||</span> <span class="nx">order</span><span class="p">.</span><span class="nx">taker</span> <span class="o">==</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">sender</span><span class="p">);</span>
    <span class="c1">// do not allow self trade</span>
    <span class="nx">require</span><span class="p">(</span><span class="nx">order</span><span class="p">.</span><span class="nx">maker</span> <span class="o">!=</span> <span class="nx">address</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">order</span><span class="p">.</span><span class="nx">maker</span> <span class="o">!=</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">sender</span><span class="p">);</span>
    <span class="nx">require</span><span class="p">(</span>
        <span class="nx">order</span><span class="p">.</span><span class="nx">maker</span><span class="p">.</span><span class="nx">isValidSignature</span><span class="p">(</span>
            <span class="nx">order</span><span class="p">.</span><span class="nx">orderHash</span><span class="p">,</span>
            <span class="nx">v</span><span class="p">,</span>
            <span class="nx">r</span><span class="p">,</span>
            <span class="nx">s</span>
    <span class="p">));</span>


    <span class="k">if</span> <span class="p">(</span><span class="nx">now</span> <span class="o">&gt;=</span> <span class="nx">order</span><span class="p">.</span><span class="nx">expirationTimeStamp</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">emit</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">ErrorCodes</span><span class="p">.</span><span class="nx">ORDER_EXPIRED</span><span class="p">,</span> <span class="nx">order</span><span class="p">.</span><span class="nx">orderHash</span><span class="p">);</span>
        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kr">int</span> <span class="nx">remainingQty</span> <span class="o">=</span> <span class="nx">orderQty</span><span class="p">.</span><span class="nx">subtract</span><span class="p">(</span><span class="nx">getQtyFilledOrCancelledFromOrder</span><span class="p">(</span><span class="nx">order</span><span class="p">.</span><span class="nx">orderHash</span><span class="p">));</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">remainingQty</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// there is no qty remaining  - cannot fill!</span>
        <span class="nx">emit</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">ErrorCodes</span><span class="p">.</span><span class="nx">ORDER_DEAD</span><span class="p">,</span> <span class="nx">order</span><span class="p">.</span><span class="nx">orderHash</span><span class="p">);</span>
        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">filledQty</span> <span class="o">=</span> <span class="nx">MathLib</span><span class="p">.</span><span class="nx">absMin</span><span class="p">(</span><span class="nx">remainingQty</span><span class="p">,</span> <span class="nx">qtyToFill</span><span class="p">);</span>
    <span class="nx">marketCollateralPool</span><span class="p">.</span><span class="nx">updatePositions</span><span class="p">(</span>
        <span class="nx">order</span><span class="p">.</span><span class="nx">maker</span><span class="p">,</span>
        <span class="nx">msg</span><span class="p">.</span><span class="nx">sender</span><span class="p">,</span>
        <span class="nx">filledQty</span><span class="p">,</span>
        <span class="nx">order</span><span class="p">.</span><span class="nx">price</span>
    <span class="p">);</span>
    <span class="nx">orderMappings</span><span class="p">.</span><span class="nx">addFilledQtyToOrder</span><span class="p">(</span><span class="nx">order</span><span class="p">.</span><span class="nx">orderHash</span><span class="p">,</span> <span class="nx">filledQty</span><span class="p">);</span>

    <span class="nx">uint</span> <span class="nx">paidMakerFee</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nx">uint</span> <span class="nx">paidTakerFee</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">order</span><span class="p">.</span><span class="nx">feeRecipient</span> <span class="o">!=</span> <span class="nx">address</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span> <span class="p">{</span>
        <span class="c1">// we need to transfer fees to recipient</span>
        <span class="nx">uint</span> <span class="nx">filledAbsQty</span> <span class="o">=</span> <span class="nx">filledQty</span><span class="p">.</span><span class="nx">abs</span><span class="p">();</span>
        <span class="nx">uint</span> <span class="nx">orderAbsQty</span> <span class="o">=</span> <span class="nx">filledQty</span><span class="p">.</span><span class="nx">abs</span><span class="p">();</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">order</span><span class="p">.</span><span class="nx">makerFee</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">paidMakerFee</span> <span class="o">=</span> <span class="nx">order</span><span class="p">.</span><span class="nx">makerFee</span><span class="p">.</span><span class="nx">divideFractional</span><span class="p">(</span><span class="nx">filledAbsQty</span><span class="p">,</span> <span class="nx">orderAbsQty</span><span class="p">);</span>
            <span class="nx">MKT_TOKEN</span><span class="p">.</span><span class="nx">safeTransferFrom</span><span class="p">(</span>
                <span class="nx">order</span><span class="p">.</span><span class="nx">maker</span><span class="p">,</span>
                <span class="nx">order</span><span class="p">.</span><span class="nx">feeRecipient</span><span class="p">,</span>
                <span class="nx">paidMakerFee</span>
            <span class="p">);</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">order</span><span class="p">.</span><span class="nx">takerFee</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">paidTakerFee</span> <span class="o">=</span> <span class="nx">order</span><span class="p">.</span><span class="nx">takerFee</span><span class="p">.</span><span class="nx">divideFractional</span><span class="p">(</span><span class="nx">filledAbsQty</span><span class="p">,</span> <span class="nx">orderAbsQty</span><span class="p">);</span>
            <span class="nx">MKT_TOKEN</span><span class="p">.</span><span class="nx">safeTransferFrom</span><span class="p">(</span>
                <span class="nx">msg</span><span class="p">.</span><span class="nx">sender</span><span class="p">,</span>
                <span class="nx">order</span><span class="p">.</span><span class="nx">feeRecipient</span><span class="p">,</span>
                <span class="nx">paidTakerFee</span>
            <span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">emit</span> <span class="nx">OrderFilled</span><span class="p">(</span>
        <span class="nx">order</span><span class="p">.</span><span class="nx">maker</span><span class="p">,</span>
        <span class="nx">msg</span><span class="p">.</span><span class="nx">sender</span><span class="p">,</span>
        <span class="nx">order</span><span class="p">.</span><span class="nx">feeRecipient</span><span class="p">,</span>
        <span class="nx">filledQty</span><span class="p">,</span>
        <span class="nx">paidMakerFee</span><span class="p">,</span>
        <span class="nx">paidTakerFee</span><span class="p">,</span>
        <span class="nx">order</span><span class="p">.</span><span class="nx">orderHash</span>
    <span class="p">);</span>

    <span class="k">return</span> <span class="nx">filledQty</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<p>When a <code>taker</code> finds an order they would like to transact against, they call the <code>tradeOrder</code> function. </p>

<p>This function, verifies the order signature, ensures all contracts and users are allowed to trade and if successful
handles the accounting with the associated resulting fills (either open a new position, or perhaps, closing out an 
existing open position). </p>

<p>A <code>taker</code> is not required to fill the entire <code>maker</code> order and specifies the <code>qty</code> they are willing to transact.  The
price however is static as set and signed by the <code>maker</code>.</p>
<h2 id='market-contract-registry'>Market Contract Registry</h2>
<p>A registry will exist of all MARKET contracts that are approved for trading.  Eventually there will be some
mechanism for the community to flag contracts that are not valid, or reasonable for removal from the white list.  At
first this may be more centralized, but eventually the goal is to have a fully decentralized community in charge of 
such matters.</p>
<h2 id='mkt-tokens'>MKT Tokens</h2>
<p><img src="https://raw.githubusercontent.com/MARKETProtocol/assets/master/Art/MARKET_Protocol-MKT-small.png" title="MKT Token" alt="alt text" /></p>

<p>MKT Tokens are the lifeblood of the MARKET ecosystem.  All fees charged by nodes will be transacted in MKT and additionally
anyone who wishes to create a new <code>MarketContract</code> will be forced to have some minimum balance of MKT. Finally, for every
<code>MarketContract</code> a user desires to trade, some amount of MKT must be locked to enable access to that contract.  These
can be unlocked at any time the user wishes to stop trading that <code>MarketContract</code>.   </p>
<h1 id='market-js'>MARKET.js</h1>
<p>All code for this library can be found <a href="https://github.com/MARKETProtocol/MARKET.js">here</a>. If you have any
issues to report or features to request please do so by opening an issue on 
<a href="https://github.com/MARKETProtocol/MARKET.js/issues">GitHub</a>.</p>

<p><strong>Under Construction</strong></p>
<h2 id='order-life-cycle'>Order Life Cycle</h2>
<p>Note: this is the generalized lifecycle, function calls will be replaced with MARKET.js function calls that provide
a simplified abstraction to the underlying solidity calls. </p>

<ol>
<li>An order is generated from a <code>maker</code> as described <a href="#orders">here</a>. Signing and hashing this order allows for us
to confirm its validity.</li>
<li>Depending on the application, this order may then be broadcast to a third party order book host who may provide
further verifications before publishing the order to their orders books, including: 

<ul>
<li>Verifying sufficient funding in the MARKET Contract for the maker&#39;s address</li>
<li>Validating user has locked MKT to allow for access for trading the specified MARKET Protocol smart contract.</li>
</ul></li>
<li>The specified taker, or an arbitrary taker (if none specified) is able to call the <code>traderOrder</code> function filling 
all or a partial qty of the order.  This transaction happens on-chain and therefore validates all aspects of the transaction are
successful.</li>
<li> Third party order book hosts will be responsible for removing completely filled or completely cancelled orders from 
their order books.  Orders can be cancelled by setting an <code>expirationTimeStamp</code> or by calling the function <code>cancelOrder</code>
at any time</li>
</ol>
<h2 id='requirements-for-a-successful-traderorder-call'>Requirements for a successful <code>traderOrder</code> call</h2>
<p>In order for a taker to not waste gas on a call to <code>traderOrder</code> that will ultimately fail it is important to note 
the following requirements in order for a transaction to be executed.</p>

<ol>
<li><code>MarketContract</code> must be deployed correctly, linked to a <code>MarketCollateralPool</code> and not be in an <code>isSettled</code> state</li>
<li>Both <code>maker</code> and <code>taker</code> must have locked the requisite amount of MKT to enable trading for the specific contract.
This can be verified by calling <code>isUserEnabledForContract</code> in the <code>MarketToken</code> smart contract (not enforced on Rinkeby currently). </li>
<li>caller of <code>tradeOrder</code> is either the specified <code>taker</code> in the order, or no <code>taker</code> was specified</li>
<li>the <code>maker</code> and <code>taker</code> are not the same address (no <a href="https://en.wikipedia.org/wiki/Wash_trade">wash</a> trading)</li>
<li>the order has not expired, been cancelled, nor been completely filled</li>
<li>both <code>maker</code> and <code>taker</code> have sufficient balances to lock collateral for attempted trade<br></li>
</ol>
<h1 id='tutorial-1-orders'>Tutorial #1 - Orders</h1>
<p>This tutorial will go over creating, validating and filling an order using our library MARKET.js.  This tutorial utilizes
a local development environment in which we have MARKET Protocol Smart Contracts deployed to and trading accounts created
that are already pre-funded with the needed tokens for trading.</p>
<h2 id='installation'>Installation</h2>
<blockquote>
<p>Clone needed repos:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>
<span class="c"># 1. clone our demo-project</span>
git clone https://github.com/MARKETProtocol/demo-projects.git

<span class="c"># 2. clone the ethereum-bridge to allow deployment of our contracts connect to Oraclize.it</span>
git clone https://github.com/MARKETProtocol/ethereum-bridge.git

<span class="c"># 3. install needed dependencies</span>
npm install -g truffle
<span class="nb">cd</span> ~/demo-projects
npm install
<span class="nb">cd</span> ~/ethereum-bridge
npm install

</code></pre>
<p>In order to simplify developers interaction with our underlying smart contracts and the ethereum
blockchain, we have created the MARKET.js library. It provides a standardized and simplified API to interact
with MARKET Protocol. In order to create a development environment, you will need to have
a local instance of the blockchain to interact with.  For this we recommend using <a href="https://truffleframework.com/">Truffle</a></p>

<p>We have also created a demo starter project to help with these tutorials available on <a href="https://github.com/MARKETProtocol/demo-projects">github</a>.</p>

<p>You can clone the repo locally to run the tutorial and being working with MARKET Protocol.  You will also need to clone
the <code>ethereum-bridge</code> which allows for our contracts to interact with Oraclize.it for demonstration purposes</p>
<h2 id='development-environment'>Development Environment</h2>
<blockquote>
<p>Start truffle:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="nb">cd</span> ~/demo-projects
truffle develop
</code></pre>
<blockquote>
<p>Start the ethereum bridge (in a separate console) :</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="nb">cd</span> ~/ethereum-bridge
node bridge -H localhost:9545 -a 9 --dev
</code></pre>
<blockquote>
<p>Deploy contracts to the local truffle instance</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># inside truffle console, </span>
<span class="gp">truffle(develop)&gt; </span>migrate --reset

</code></pre>
<p>After you have installed these projects and the needed dependencies, you can begin to create the needed development environment.</p>

<ol>
<li>Start truffle</li>
<li>Start the ethereum bridge (in a separate console)</li>
<li>Once the ethereum bridge has initialized, you will see a log message similiar to <code>[2018-08-22T18:49:30.289Z] INFO Listening @ 0xf7e3e47e06f1bddecb1b2f3a7f60b6b25fd2e233 (Oraclize Connector)
</code> you can now run the migrations to deploy our contracts to the local truffle instance.</li>
</ol>

<aside class="notice">
If you see an error similiar to `Error: VM Exception while processing transaction: revert` the ethereum-bridge probably isn't intialized yet.
Check the logging output in that console, and attempt to rerun the migrations.
</aside>

<p>If you have followed along this along, congratulations, you have a working local MARKET Protocol environment to work against. We can now 
move on to our tutorial. </p>

<p>If you are unable to get the environment set up please come find us in <a href="https://marketprotocol.io/discord">Discord</a>, 
there are several core dev team members in #engineering that will be happy to help!</p>
<h2 id='essential-packages'>Essential packages</h2>
<blockquote>
<p>Import the needed packages:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code>
<span class="kr">import</span> <span class="o">*</span> <span class="nx">as</span> <span class="nx">Web3</span> <span class="nx">from</span> <span class="s1">'web3'</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Market</span><span class="p">,</span> <span class="nx">MARKETProtocolConfig</span><span class="p">,</span> <span class="nx">Utils</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'@marketprotocol/marketjs'</span><span class="p">;</span>

</code></pre>
<p>There are a few essential packages for interacting with our protocol, and the ethereum blockchain. <code>Web3</code> provides
the needed functionality for us to connect with our local truffle node, and marketjs is our MARKET.js library
designed to simplify your interactions with the underlying MARKET Protocol Smart Contracts.</p>
<h2 id='instantiation'>Instantiation</h2>
<blockquote>
<p>Creating a web3 instance and the Market object:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code>
<span class="kr">const</span> <span class="nx">web3Instance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Web3</span><span class="p">(</span><span class="k">new</span> <span class="nx">Web3</span><span class="p">.</span><span class="nx">providers</span><span class="p">.</span><span class="nx">HttpProvider</span><span class="p">(</span><span class="s1">'http://localhost:9545'</span><span class="p">));</span>
<span class="kr">const</span> <span class="nx">config</span><span class="p">:</span> <span class="nx">MARKETProtocolConfig</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">networkId</span><span class="p">:</span> <span class="nx">TRUFFLE_NETWORK_ID</span>
<span class="p">};</span>

<span class="kr">const</span> <span class="nx">market</span><span class="p">:</span> <span class="nx">Market</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Market</span><span class="p">(</span><span class="nx">web3Instance</span><span class="p">.</span><span class="nx">currentProvider</span><span class="p">,</span> <span class="nx">config</span><span class="p">);</span>

</code></pre>
<p>Once we have imported these packages, we can now create an instance of web3, connected to our local truffle node
as the provider.  Using this provider, we can create a new <code>Market</code> object, which is the main entry point for
all functionality contained in MARKET.js</p>
<h2 id='contract-specifications'>Contract Specifications</h2>
<blockquote>
<p>Getting whitelisted addresses and contract specs:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code>
<span class="kr">const</span> <span class="nx">marketContractAddress</span><span class="p">:</span> <span class="nx">string</span><span class="p">[]</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">market</span><span class="p">.</span><span class="nx">getAddressWhiteListAsync</span><span class="p">();</span>
<span class="kr">const</span> <span class="nx">demoContractAddress</span><span class="p">:</span> <span class="nx">string</span> <span class="o">=</span> <span class="nx">marketContractAddress</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="kr">const</span> <span class="nx">contractMetaData</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">market</span><span class="p">.</span><span class="nx">getContractMetaDataAsync</span><span class="p">(</span><span class="nx">demoContractAddress</span><span class="p">);</span>

</code></pre>
<p>The <code>Market</code> class provide methods for getting the current collection of white listed MARKET Protocol Smart Contract
addresses and well as meta data bout those deployed contracts.  It is also important to note, that there is 
an off chain API that can provide this information to users who need higher level functionality such as queries.</p>
<h2 id='collateral'>Collateral</h2>
<blockquote>
<p>Approving collateral transfer and deposit to the smart contract:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code>
<span class="kr">const</span> <span class="nx">traderA</span> <span class="o">=</span> <span class="nx">web3Instance</span><span class="p">.</span><span class="nx">eth</span><span class="p">.</span><span class="nx">accounts</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="kr">const</span> <span class="nx">traderB</span> <span class="o">=</span> <span class="nx">web3Instance</span><span class="p">.</span><span class="nx">eth</span><span class="p">.</span><span class="nx">accounts</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>

<span class="nx">await</span> <span class="nx">market</span><span class="p">.</span><span class="nx">approveCollateralDepositAsync</span><span class="p">(</span><span class="nx">demoContractAddress</span><span class="p">,</span> <span class="mi">1</span><span class="nx">e25</span><span class="p">,</span> <span class="p">{</span><span class="na">from</span><span class="p">:</span> <span class="nx">traderA</span><span class="p">});</span>
<span class="nx">await</span> <span class="nx">market</span><span class="p">.</span><span class="nx">approveCollateralDepositAsync</span><span class="p">(</span><span class="nx">demoContractAddress</span><span class="p">,</span> <span class="mi">1</span><span class="nx">e25</span><span class="p">,</span> <span class="p">{</span><span class="na">from</span><span class="p">:</span> <span class="nx">traderB</span><span class="p">});</span>

<span class="nx">await</span> <span class="nx">market</span><span class="p">.</span><span class="nx">depositCollateralAsync</span><span class="p">(</span><span class="nx">demoContractAddress</span><span class="p">,</span> <span class="mi">1</span><span class="nx">e25</span><span class="p">,</span> <span class="p">{</span><span class="na">from</span><span class="p">:</span> <span class="nx">traderA</span><span class="p">});</span>
<span class="nx">await</span> <span class="nx">market</span><span class="p">.</span><span class="nx">depositCollateralAsync</span><span class="p">(</span><span class="nx">demoContractAddress</span><span class="p">,</span> <span class="mi">1</span><span class="nx">e25</span><span class="p">,</span> <span class="p">{</span><span class="na">from</span><span class="p">:</span> <span class="nx">traderB</span><span class="p">});</span>

</code></pre>
<p>Each MARKET Protocol Smart Contract has a unique collateral pool.  In order to enable trading, a user must first
approve the transfer of funds (an ERC20 token, as defined by the contract) and then call the <code>depositCollateralAsync</code>
method.  This will allow for ERC20 tokens to be moved from a user&#39;s address to the smart contract for trading. 
Deposited funds, that have not been committed to a trade, may be withdrawn at any time by the user.  Upon executing a
trader, the users maximum loss will become locked into the collateral pool, and that amount is no longer able to be
withdrawn until the trade is exited, or the contract settled.</p>
<h2 id='order-creation'>Order Creation</h2>
<blockquote>
<p>Creating a signed order:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code>
<span class="kr">const</span> <span class="nx">orderExpirationTimeStamp</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BigNumber</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">+</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span><span class="p">);</span> <span class="c1">// expires in 1 hour</span>
<span class="kr">const</span> <span class="nx">fees</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BigNumber</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">orderQty</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BigNumber</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">orderPrice</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BigNumber</span><span class="p">(</span><span class="mi">7500000</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">feeRecipient</span> <span class="o">=</span> <span class="nx">Constants</span><span class="p">.</span><span class="nx">NULL_ADDRESS</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">signedOrder</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">market</span><span class="p">.</span><span class="nx">createSignedOrderAsync</span><span class="p">(</span>
  <span class="nx">demoContractAddress</span><span class="p">,</span>
  <span class="nx">orderExpirationTimeStamp</span><span class="p">,</span>
  <span class="nx">feeRecipient</span><span class="p">,</span>
  <span class="nx">traderA</span><span class="p">,</span>
  <span class="nx">fees</span><span class="p">,</span>
  <span class="nx">traderB</span><span class="p">,</span>
  <span class="nx">fees</span><span class="p">,</span>
  <span class="nx">orderQty</span><span class="p">,</span>
  <span class="nx">orderPrice</span><span class="p">,</span>
  <span class="nx">Utils</span><span class="p">.</span><span class="nx">generatePseudoRandomSalt</span><span class="p">(),</span>
  <span class="kc">false</span>
<span class="p">);</span>

</code></pre>
<p>After collateral funds have been deposited, a user is able to create a valid order for trading.  This order is signed
by the user in order to ensure its origin.  Market.js provides several methods for validation of the order
that can be used in order for proper pruning of order books by exchanges.</p>
<h2 id='filling-an-order'>Filling an Order</h2>
<blockquote>
<p>trading against a signed order:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code>
<span class="kr">const</span> <span class="nx">orderTransactionInfo</span><span class="p">:</span> <span class="nx">OrderTransactionInfo</span> <span class="o">=</span>
    <span class="nx">await</span> <span class="nx">market</span><span class="p">.</span><span class="nx">tradeOrderAsync</span><span class="p">(</span><span class="nx">signedOrder</span><span class="p">,</span> <span class="nx">orderQty</span><span class="p">,</span> <span class="p">{</span> <span class="na">from</span><span class="p">:</span> <span class="nx">traderB</span><span class="p">,</span> <span class="na">gas</span><span class="p">:</span> <span class="mi">400000</span> <span class="p">});</span>

<span class="c1">// we can now display the information about this filled transaction</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">orderTransactionInfo</span><span class="p">.</span><span class="nx">txHash</span><span class="p">,</span> <span class="nx">await</span> <span class="nx">orderTransactionInfo</span><span class="p">.</span><span class="nx">filledQtyAsync</span><span class="p">);</span>
</code></pre>
<p>By calling <code>traderOrderAsync</code> against a validated <code>SignedOrder</code>, a user may fill all or a portion of an order.  In order to 
avoid wasting gas, by a call to <code>traderOrderAsync</code> that will ultimately fail, Market.js provides as much verification as 
is possible prior to a call to the on-chain transaction.</p>

<p>If the trade is successfully executed, both counter-parties (TraderA and TraderB) will have their collateral locked,
and a newly recorded open position.</p>
<h2 id='open-positions'>Open Positions</h2>
<blockquote>
<p>Querying open positions:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Trader A - Open Positions ='</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">await</span> <span class="nx">market</span><span class="p">.</span><span class="nx">getUserPositionsAsync</span><span class="p">(</span><span class="nx">demoContractAddress</span><span class="p">,</span> <span class="nx">traderA</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="kc">true</span><span class="p">));</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Trader B - Open Positions ='</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">await</span> <span class="nx">market</span><span class="p">.</span><span class="nx">getUserPositionsAsync</span><span class="p">(</span><span class="nx">demoContractAddress</span><span class="p">,</span> <span class="nx">traderB</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="kc">true</span><span class="p">));</span>
</code></pre>
<p>A trader&#39;s open positions are recorded onto the blockchain and can be accessed with the <code>getUserPositionsAsync</code> function.
Additional functionality is provided for sorting and consolidating the reporting of these positions.</p>
<h2 id='remaining-balances'>Remaining Balances</h2>
<blockquote>
<p>Retrieving remaining balances:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'\n Trader A Collateral Balance Remaining ='</span><span class="p">,</span>
    <span class="p">(</span><span class="nx">await</span> <span class="nx">market</span><span class="p">.</span><span class="nx">getUserUnallocatedCollateralBalanceAsync</span><span class="p">(</span><span class="nx">demoContractAddress</span><span class="p">,</span> <span class="nx">traderA</span><span class="p">)).</span><span class="nx">toString</span><span class="p">());</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'\n Trader B Collateral Balance Remaining ='</span><span class="p">,</span>
    <span class="p">(</span><span class="nx">await</span> <span class="nx">market</span><span class="p">.</span><span class="nx">getUserUnallocatedCollateralBalanceAsync</span><span class="p">(</span><span class="nx">demoContractAddress</span><span class="p">,</span> <span class="nx">traderB</span><span class="p">)).</span><span class="nx">toString</span><span class="p">());</span>
</code></pre>
<p>The remaining collateral that is available for trading in the smart contract can be accessed via a call to 
<code>getUserUnallocatedCollateralBalanceAsync</code>.</p>
<h1 id='dapp'>dApp</h1>
<p>The MARKET Protocol dApp provides tools for contract creation, oracle testing and deployment. 
Additionally, users are able to easily search previously deployed MARKET contracts they would 
like to trade.</p>

<p>A simulated trading environment allows user to place test trades and participate in beta
releases of the protocol.</p>

<p>Our beta dApp is currently running on the <code>Rinkeby testnet</code> <a href="https://dapp.marketprotocol.io/">here</a>.</p>
<h2 id='using-an-ethereum-enabled-browser'>Using an Ethereum-enabled browser</h2>
<p>For testing and interacting with our dApp, you will need to use a browser that supports Web3. 
We recommend using the <a href="https://metamask.io/">Metamask Chrome Browser Extension</a>. This will enable you to connect to the 
Ethereum network from your browser. Metamask allows you to run Ethereum dApps right in your browser without running a full Ethereum node.</p>
<h2 id='acquire-test-eth'>Acquire Test ETH</h2>
<p>Our smart contracts are currently deployed on the <code>Rinkeby testnet</code>. You will need to have test ETH to use this library. 
You can request test funds from the <a href="https://faucet.rinkeby.io/">Rinkeby faucet</a>. </p>

<aside class="notice">
Always confirm that you are on Rinkeby testnet when testing our dApp.
</aside>
<h2 id='contract-deployment'>Contract Deployment</h2>
<p>MARKET Protocol creates a flexible contract specification which allows users to easily implement
their desired contract prior to trading.  First time users, can use our 
<a href="https://dapp.marketprotocol.io/contract/deploy?mode=guided">Guided Deploy</a> process
walking them through the step by step process to deployment.  Expert users, can opt for a more
condensed process with the <a href="https://dapp.marketprotocol.io/contract/deploy?mode=quick">Quick Deploy</a> </p>
<h3 id='guided-deploy'>Guided Deploy</h3>
<p>MARKET Protocol Guided Deploy provides a step by step guide to first time deployment.  Below are the needed variables
to deploy a contract to the Ethereum Blockchain</p>

<ol>
<li><code>Name</code> - the contract name should be as descriptive as possible capturing the underlying asset relationship as well as possibly the expiration. 
Something like <code>ETH/BTC-Kraken_YYYY-MM-DD</code> may help others understand the underlying asset, the data source, and 
expiration date in a nice human readable and searchable way.
In the future, MARKET will implement a standardized naming convention and guidelines to formalize this process</li>
<li><code>Collateral Token</code> - every contract should be backed by an ERC20 Token that will be used a collateral for the contract. Traders 
must deposit tokens to the smart contract prior to trading, and upon execution of a trade, the appropriate amount of 
collateral becomes locked until that position is exited. In this fashion, all open positions always remain 100% 
collateralized removing counter party risk from the traders. Please specify a ERC20 Token address for this contract.
In the future, users will be able to easily select from well known ERC20 tokens to ensure more safety and 
avoid dealing with long addresses.</li>
<li><code>Oraclize.it data source</code> - Oraclize.it offers several data-sources such as &quot;URL&quot; and &quot;WolframAlpha&quot;</li>
<li><code>Price Decimal Places</code> - Ethereum currently does not support floating points numbers. Therefore all prices reported by 
oracles must be converted to a whole number (integer). This variable is how many decimal places one needs to move 
the decimal in order to go from the oracle query price to an integer. For example, if the oracle query results 
returned a value of 190.22, we need to move the decimal two (2) places to convert to a whole number of 19022, 
so we would enter 2. </li>
<li><code>Price Floor</code> - this is the lower bound of price exposure this contract will trade. If the oracle reports a price 
below this value the contract will enter into settlement. This should also be represented as a whole number. 
If we take the example above of a price of 190.22 and decide the Floor for our contract should be 150.00, 
we would enter 15000.</li>
<li><code>Price Cap</code> - This is the upper bound of price exposure this contract will trade. If the oracle reports a price above this value 
the contract will enter into settlement. Following our example, if we decide the Cap for our contract 
should be 230.00, we would enter 23000 as our Cap.<br></li>
<li><code>Qty Multiplier</code> - The quantity multiplier allows the user to specify how many base units (for Ethereum, this would be wei) each integer 
price movement changes the value of the contract. If our integerized price was 19022 with a qty multiplier of 1, 
and the price moved to 19023, then the value will have change by 1 wei. If however the multiplier was set at 
1,000,000,000 the price movement of 1 unit would now correspond to a value of 1 gwei (not wei). 
Please see <a href="https://etherconverter.online/">here</a> for an ethereum unit converter.</li>
<li><code>Expiration Time</code> - upon reaching the expiration timestamp all open positions will settle against the final 
price query returned by the oracle.</li>
</ol>
<h3 id='quick-deploy'>Quick Deploy</h3>
<p>MARKET Protocol Quick Deploy provides a scaled down interface for easy deployment of contracts to the 
Ethereum blockchain.  Expert users can enter variables, that are validated with error checking prior
to deploying.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Name</td>
<td>Viewable name of this contract, in the future we will implement suggested naming conventions</td>
</tr>
<tr>
<td>Collateral Token Address</td>
<td>address of the ERC20 token that will be used for collateral</td>
</tr>
<tr>
<td>Price Floor</td>
<td>minimum tradeable price of this contract</td>
</tr>
<tr>
<td>Price Cap</td>
<td>maximum tradeable price of this contract</td>
</tr>
<tr>
<td>Price Decimal Places</td>
<td>Since all numbers must be represented as integers on the Ethereum blockchain, this is how many decimal places one needs to move the decimal in order to go from the oracle query price to an integer. For instance if the oracle query results returned a value such as 190.22, we need to move the decimal two (2) places to convert to an integer value of 19022.</td>
</tr>
<tr>
<td>Qty Multiplier</td>
<td>The qty multiplier allows the user to specify how many base units (for ethereum, this would be wei) each integer price movement changes the value of the contract. If our integerized price was 19022 with a qty multiplier of 1, and the price moved to 19023, then the value will have change by 1 wei. If however the multiplier was set at 1,000,000,000 the price movement of 1 unit would now correspond to a value of 1 gwei (not wei)</td>
</tr>
<tr>
<td>Expiration Time</td>
<td>Expiration timestamp for all open positions to settle.</td>
</tr>
<tr>
<td>Oraclize.it data source</td>
<td>Available data sources from Oraclize.it</td>
</tr>
<tr>
<td>Oraclize.it Query</td>
<td>Properly structured Oraclize.it query, please use the <a href="http://dapp.marketprotocol.io/test">test query</a> page for clarification</td>
</tr>
</tbody></table>
<h2 id='explore-contracts'>Explore Contracts</h2>
<p>MARKET Protocol&#39;s dApp provides the needed functionality to easily search, filter, and sort already deployed
MARKET Smart Contracts.  </p>
<h2 id='find-contracts'>Find Contracts</h2>
<p>The <a href="https://dapp.marketprotocol.io/contract/find">Find Contracts</a> screen allows for a reverse lookup
for MARKET Contracts using the ethereum address of the deployed contract.  Users can enter
a known address, if valid, the dApp will display the current specifications of the MARKET Contract
deployed to this address.</p>
<h2 id='test-query'>Test Query</h2><h2 id='simulated-exchange'>Simulated Exchange</h2>
<p>Coming soon...</p>
<h1 id='faq-general'>FAQ - General</h1><h2 id='what-blockchain-is-used'>What blockchain is used?</h2>
<p>MARKET Protocol has chosen to build on top of Ethereum.</p>
<h2 id='what-is-the-token-name'>What is the token name?</h2>
<p>MARKET Protocol Token</p>
<h2 id='what-is-the-token-ticker-symbol'>What is the token ticker symbol?</h2>
<p>MKT</p>
<h2 id='how-can-i-receive-updates-from-market-protocol'>How can I receive updates from MARKET Protocol?</h2>
<p>Check out our <a href="htttps://marketprotocol.io/telegram">telegram room</a> and join our <a href="https://marketprotocol.io/#subscribe">newsletter!</a> </p>
<h2 id='what-39-s-the-total-supply-of-the-token'>What&#39;s the total supply of the token?</h2>
<p>600 million MKT tokens (600,000,000) </p>
<h2 id='can-extra-mkt-tokens-be-added-to-the-total-supply'>Can extra MKT Tokens be added to the total supply?</h2>
<p>No, there is a fixed supply.</p>
<h2 id='can-you-mine-the-tokens'>Can you mine the tokens?</h2>
<p>No.  All tokens will be minted upon main net launch.</p>
<h2 id='what-wallet-should-i-use-to-keep-my-mkt-tokens'>What wallet should I use to keep my MKT tokens?</h2>
<p>MKT is an ERC20 token, so a wallet that supports ERC20 tokens will be needed.</p>
<h2 id='when-will-the-main-net-launch-occur'>When will the main net launch occur?</h2>
<p>The proposed launch date is in Q1 2019 </p>
<h2 id='what-are-the-official-chat-channels-and-links'>What are the official chat channels and links?</h2>
<ul>
<li>Main Site <a href="https://marketprotocol.io">https://marketprotocol.io</a></li>
<li>Medium <a href="https://medium.com/market-protocol">https://medium.com/market-protocol</a></li>
<li>GitHub <a href="https://github.com/MARKETProtocol">https://github.com/MARKETProtocol</a></li>
<li>Telegram <a href="https://t.me/Market_Protocol_Chat">https://t.me/Market_Protocol_Chat</a></li>
<li>Discord <a href="https://marketprotocol.io/discord">https://marketprotocol.io/discord</a></li>
</ul>
<h1 id='faq-market-protocol'>FAQ - MARKET Protocol</h1><h2 id='what-is-a-derivative'>What is a derivative?</h2>
<p>A derivative represents a contract between a buyer and a seller. The value is derived from on an underlying asset or assets. Common derivatives use stocks, commodities, currencies, bonds, or interest rates as the underlying asset for the contract.</p>
<h2 id='are-you-a-decentralized-exchange'>Are you a decentralized exchange?</h2>
<p>No, MARKET is a protocol to enable the trading of decentralized derivative like contracts.  Third parties will write the application layers on top of the protocol and we hope to create an API layer to facilitate this as well. </p>
<h2 id='who-will-host-market-39-s-order-books'>Who will host MARKET&#39;s order books?</h2>
<p>Third party order book hosts, called nodes will be provided with an API that easy allows them to host an order book.  Nodes, in turn may charge fees for the services they provide.  These fee&#39;s are not determined by MARKET and are set directly by the node.</p>
<h2 id='does-market-charge-a-fee-to-use-the-protocol'>Does MARKET charge a fee to use the protocol?</h2>
<p>MARKET doesn&#39;t charge any fees.  Nodes however may set a fee for their services of hosting order books.</p>
<h2 id='how-is-the-needed-collateral-for-an-open-position-calculated'>How is the needed collateral for an open position calculated?</h2>
<p>All positions are always fully collateralized, meaning the maximum possible loss for a position is the required amount of collateral to open that position. For a buyer, the maximum possible loss is calculated as the price of the trade minus the <code>PRICE_FLOOR</code> times the qty transacted.  Conversely, if you are opening a short position the maximum loss is calculated as <code>PRICE_CAP</code> minus the price of the trade, multiplied by the qty transacted.  Upon filling an order both parties commit their respective maximum loss to the collateral pool.</p>
<h2 id='if-i-want-to-open-a-short-position-do-i-need-to-borrow-the-asset'>If I want to open a short position do I need to borrow the asset?</h2>
<p>No, there is no borrowing, fees to be paid, or locates to deal with for shorting.  Due to the unique nature of our derivative like contracts, a trader is able to open a short position without owning the underlying asset.  This is similar to how financial futures work, where a seller of the SP500 futures, doesn&#39;t need to own, locate, or borrow the SP500 in order to gain the short price exposure to the SP500.</p>
<h2 id='when-is-my-collateral-returned-to-me-and-able-to-be-withdrawn'>When is my collateral returned to me and able to be withdrawn?</h2>
<p>Collateral is credited to a users address and able to be withdrawn upon expiration of the contract or if the user trades out of their open position.  For instance, if a trader holding a long open position, sells to close out that position prior to expiration, they will immediately be able to withdraw the collateral associated (plus or minus any profit or loss) with their trade.</p>
<h2 id='what-happens-if-i-hold-an-open-position-through-contract-expiration'>What happens if I hold an open position through contract expiration?</h2>
<p>Upon expiration, the contract will reach a settlement price via the agreed upon oracle solution.  At this point, all funds will be able to be withdrawn for all open positions.  The amount of collateral that is credited back to the user will be determined by their execution price and the settlement price of the contract.  Note, that there will probably be some short delay between contract expiration and the settlement period to allow for disputes to be raised.</p>
<h2 id='when-i-trade-out-of-an-open-position-how-is-my-profit-or-loss-allocated'>When I trade out of an open position, how is my profit or loss allocated?</h2>
<p>When a position is closed, the appropriate amount of funds are allocated back to the user and are immediately available for withdrawal from the smart contract.  If the trade that was made was profitable, more funds will be available for withdrawal than originally posted, and if the trade represented a loser for the user, less funds than originally posted would now be available for withdrawal.  As an example, let us imagine a contract with a <code>PRICE_FLOOR</code> of 50 and a <code>PRICE_CAP</code> of 150 using Token A as collateral.  Bob enters into a long position for a qty of 1 at a price of 85.  At this point 35 units of Token A would be committed to the collateral pool (representing his max possible loss).  Later, Bob exits his position by selling at a price of 95.  The amount of Token A now allocated to Bob&#39;s account is 45 (35 of which is his original collateral and 10 of which represents his profit from his trade) and is now able to be withdrawn from the smart contract if Bob so wishes. </p>
<h2 id='can-a-contract-be-created-based-on-a-different-blockchain-or-off-chain-asset'>Can a contract be created based on a different blockchain or off chain asset?</h2>
<p>Yes, by using oracle solutions for settlement users can create contracts for any type of real world asset such as the SP500, or cross chain asset prices like Bitcoin or Monero. This opens endless opportunities and diversification for the holders of ERC20 tokens who do not want to convert into fiat but want to gain market exposure to non digital or cross chain assets.  </p>
<h2 id='do-you-have-a-white-paper-available'>Do you have a white paper available?</h2>
<p>Yes! Please select a language below</p>

<ul>
<li><a href="https://marketprotocol.io/assets/MARKET_Protocol-Whitepaper.pdf">English Version</a></li>
<li><a href="https://marketprotocol.io/assets/MARKET_Protocol-Whitepaper-Chinese.pdf">Chinese Version</a><br></li>
</ul>
<h2 id='how-will-disputes-be-resolved'>How will disputes be resolved?</h2>
<p>This is an area of active research and discussion.  We would love for community feedback to help shape the process.  Our current working theory is that once a contract settlement enters into a disputed state, that a second attempt may be made to use the originally agreed upon oracle, and if that still fails to enter into a crowd sourced voting from community members that are incentivized for a fair resolution.  We do anticipate that even in the best of circumstances oracle solutions will fail, or receive bad data.  The problem of bad or inaccurate market data is not new or unique in the world of finance, but the need to resolve these problems when they arise in a trust-less manner will be essential. </p>
<h2 id='how-do-i-get-involved'>How do I get involved?</h2>
<p>We are actively looking to expand our team. For more info please send an email to info@marketprotocol.io </p>
<h1 id='faq-solidity-smart-contracts'>FAQ - Solidity Smart Contracts</h1><h3 id='how-to-debug-market-protocol-tests'>How to debug MARKET Protocol tests?</h3>
<p>First option is to use console.log() to display Javascript objects and their properties on the console during test execution. This works well for simple cases, for more difficult scenarios one should set an asynchronous event watcher and expect events sent from Solidity contracts. For tests that have expectation on price or asynchronously wait for contract settlement it is also possible to manually update price using TestableMarketContractOraclize contract to verify correctness of the contract flow.</p>
<h1 id='faq-api'>FAQ - API</h1><h1 id='faq-dapp'>FAQ - dApp</h1><h1 id='getting-help'>Getting help</h1><h2 id='discord'>Discord</h2>
<p>We work in public and our company Discord is open to all. If you have questions or need help getting started, 
our <a href="https://marketprotocol.io/discord">Discord #engineering channel</a> is a great place to get assistance from our 
team of engineers and developers.</p>
<h2 id='email'>Email</h2>
<p>You can also reach us by email at <a href="mailto:support@marketprotocol.io">support@marketprotocol.io</a>.</p>
<h1 id='contributing'>Contributing</h1>
<p>Want to hack on MARKET Protocol? Awesome!</p>

<p>MARKET Protocol is an Open Source project and we welcome contributions of all sorts.
There are many ways to help, from reporting issues, contributing code, and helping us improve our community.</p>

<p>Please, start reading about our:</p>

<ul>
<li><a href="#development-process">Development process</a></li>
<li><a href="#community-guidelines">Community guidelines</a></li>
<li><a href="https://docs.marketprotocol.io/#coding-style">Coding style</a></li>
<li><a href="https://github.com/MARKETProtocol/community/blob/master/docs/project-management.md">Project board and GitHub labels</a></li>
</ul>
<h2 id='dive-right-in'>Dive Right In</h2>
<p>If you&#39;re ready to start helping us to build the decentralized future right now and you just need an issue to focus on, check out <a href="https://app.zenhub.com/workspace/o/marketprotocol/market.js/boards?repos=140627375,128025988,130496585,117898415,119072718,116695875,130494562,131598556,108304540,127038994,141709662,135627327,129016888&amp;labels=help%20wanted&amp;assignees=issues%20with%20no%20assignees&amp;showPRs=false&amp;showClosed=false">this list of open issues</a>.</p>

<p>There are three main repositories that are considered as core components of the MARKET Protocol:</p>

<ul>
<li><a href="https://github.com/MARKETProtocol/MARKETProtocol">MARKETProtocol</a> - the core protocol of solidity smart contracts</li>
<li><a href="https://github.com/MARKETProtocol/MARKET.js">MARKET.js</a> - library of tools to interact with the protocol</li>
<li><a href="https://github.com/MARKETProtocol/dApp">dApp</a> - React based dApp for contract creation, exploration, and simulated trading.</li>
</ul>

<p>Note that the <code>README</code> file of each one of these repositories has a helpful <code>Getting Started</code> section. Plus, you will find a <code>CONTRIBUTING.md</code> file with additional details in all of them as well.</p>

<p>Remember to join our <a href="https://marketprotocol.io/discord">Discord Community</a> to get in touch with our dev staff and other contributors. We will love to see you there.</p>

<p>We appreciate your contribution and we hope you have lots of fun while working on MARKET Protocol!</p>
<h2 id='development-process'>Development Process</h2>
<p>We follow the <a href="http://nvie.com/posts/a-successful-git-branching-model/">GitFlow</a> branching model for development.
The latest merged code generally lives in the <code>develop</code> branch of each repository. Your development flow should look like:</p>

<ol>
<li>Find an interesting issue and communicate! Please let the #engineering Discord channel know what you want to work on</li>
<li>Add a comment to the issue so we don&#39;t have multiple contributors unintentionally working on the same task.</li>
<li>Please include your intended solution and a time frame for completion in the issue.</li>
<li>Start with the <code>develop</code> branch and create a new feature branch</li>
<li>Follow the appropriate <a href="#coding-style">coding style</a> and write some awesome code</li>
<li>See <a href="https://tbaggery.com/2008/04/19/a-note-about-git-commit-messages.html">here</a> for some notes on good commit messages</li>
<li>Open a pull request to the <code>develop</code> branch, not <code>master</code></li>
</ol>
<h2 id='gitcoin-and-bounties'>Gitcoin and Bounties</h2>
<p>We are very proud users of <a href="https://gitcoin.co/">Gitcoin</a>.  It allows us an easy way to reward our community members
for their hard work contributing to MARKET Protocol.  Additionally, it allows us to gain traction on issues that are a
priority for us to address.  We won&#39;t always stake every issue, but if you need a bounty to encourage your participation
on an issue, and there isn&#39;t one yet, please reach out on <a href="https://marketprotocol.io/discord">Discord</a>.</p>

<p>There are a few guidelines when using Gitcoin that are worth mentioning</p>

<ol>
<li>Please only <code>start work</code> on an issue when your actually planning on working on it. Don&#39;t call dibs before you can allocate time to the issue</li>
<li>Please make sure to comment in the issue immediately after starting work so we know your plans for implementation and a timeline.</li>
<li>We politely ask that users only have open work on a single bounty at a time, if you have an open bounty that has a PR submitted and would like to tackle another issue, please ask in <a href="https://marketprotocol.io/discord">Discord</a> before proceeding</li>
<li>We will do our best to scope out the issue, but please anticipate some revision requested after you have submitted a PR, we are happy to tip you if these end up well beyond the initial scope</li>
<li>Once you have create a PR, please <code>submit work</code> on Gitcoin so we are able to pay you out once we have accepted the work</li>
</ol>
<h2 id='coding-style'>Coding Style</h2>
<p>We use a variety of programming languages in our repositories. When contributing, please follow the existing coding conventions
according to the <code>CONTRIBUTING.md</code> file of each repository.   </p>

<table><thead>
<tr>
<th>Project</th>
<th>Link</th>
</tr>
</thead><tbody>
<tr>
<td>website</td>
<td><a href="https://github.com/MARKETProtocol/website/blob/develop/.github/CONTRIBUTING.md">website</a></td>
</tr>
<tr>
<td>dApp</td>
<td><a href="https://github.com/MARKETProtocol/dApp/blob/develop/.github/CONTRIBUTING.md">dApp</a></td>
</tr>
<tr>
<td>MARKETProtocol</td>
<td><a href="https://github.com/MARKETProtocol/MARKETProtocol/blob/develop/.github/CONTRIBUTING.md">MARKETProtocol</a></td>
</tr>
<tr>
<td>MARKET.js</td>
<td><a href="https://github.com/MARKETProtocol/MARKET.js/blob/develop/.github/CONTRIBUTING.md">MARKET.js</a></td>
</tr>
</tbody></table>
<h2 id='git-flow'>Git Flow</h2>
<p>We are implementing <a href="https://nvie.com/posts/a-successful-git-branching-model/">Git Flow</a> for our branching model.</p>

<p><a href="https://nvie.com/posts/a-successful-git-branching-model/"><img src="images/git-branching-model.png" alt="Git Branching" /></a></p>
<h3 id='branching'>Branching</h3><pre class="highlight plaintext"><code>$ git checkout -b feature/my-feature develop
and hotfix branches (prefixed with hotfix/ by convention) off of master:

# hotfix the latest version of master
$ git checkout -b hotfix/hotfix-version-number master

# or hotfix from a specific version
$ git checkout -b hotfix/hotfix-version-number &lt;starting-tag-name&gt;
</code></pre>
<p>The main trunks which are persistent are <code>develop</code> and <code>master</code>; <code>Master</code> holds the latest release and <code>develop</code> 
holds the latest stable development copy.</p>

<p>Contributors create feature branches (prefixed with <code>feature/</code> by convention) off of <code>develop</code>. </p>

<p>These new branches are disposable, meaning they have a short lifespan before they are merged back to the main trunks. 
They are meant to encapsulate small pieces of functionality.</p>
<h3 id='finishing-branches'>Finishing Branches</h3><pre class="highlight plaintext"><code> $ git checkout develop
 $ git merge --no-ff feature/my-feature
 $ git branch -d feature/my-feature
</code></pre>
<p>When a contributor is done with a feature branch, they merge it back into develop, or create a pull request in order
 to have MARKET Protocol core team do so.</p>

<p>For a hotfix branch, it is merged back into both master and develop so the hotfix carries forward</p>
<pre class="highlight plaintext"><code> $ git checkout master
 $ git merge --no-ff hotfix/hotfix-version-number
 $ git checkout develop
 $ git merge --no-ff hotfix/hotfix-version-number
 $ git branch -d hotfix/hotfix-version-number
</code></pre><h3 id='releases'>Releases</h3>
<p>A <code>release</code> branch is created from the stable <code>develop</code> branch with a tag.</p>

<p>Using a separate <code>release</code> branch allows us to continue developing new features on develop while we fix bugs and add 
finishing touches to a <code>release</code> branch.</p>

<p>When we are ready to finish the release, we merge the <code>release</code> branch into both <code>master</code> and <code>develop</code> 
(just like a hotfix) so that all changes carry forward. The <code>master</code> branch is tagged at this point as well to mark
the released code.</p>
<h3 id='merging'>Merging</h3><pre class="highlight plaintext"><code>$ git merge --no-ff &lt;branch-name&gt;
</code></pre>
<p>Git flow encourages merging of branches with <code>--no-ff</code></p>

<p>The <code>--no-ff</code> option allows you to maintain all of your branch history without leaving a bunch of branches lying around in the current commit of the repository.</p>
<pre class="highlight plaintext"><code>$ git pull --rebase
</code></pre>
<p>Similarly, best practice is to pull with <code>--rebase</code> to avoid lots of useless merge commits.</p>

<p>You can configure git to do both of these things by default in your .gitconfig </p>
<h3 id='git-flow-extension'>git-flow extension</h3>
<p>Using the <a href="http://danielkummer.github.io/git-flow-cheatsheet/">git-flow extension</a> can greatly simplify your life and is recommended </p>
<h2 id='community-guidelines'>Community Guidelines</h2>
<p>We want to keep the MARKET Protocol community awesome, growing and collaborative.
We need your help to keep it that way. To help with this we&#39;ve come up with some general guidelines for the community as a whole:</p>

<ul>
<li><p>Be nice: Be courteous, respectful and polite to fellow community members: no regional, racial, gender, or other abuse
will be tolerated. We like nice people way better than mean ones!</p></li>
<li><p>Encourage diversity and participation: Make everyone in our community feel welcome, regardless of their background
and the extent of their contributions, and do everything possible to encourage participation in our community.</p></li>
<li><p>Keep it legal: Basically, don&#39;t get anybody in trouble. Share only content that you own, do not share private
or sensitive information, and don&#39;t break laws.</p></li>
<li><p>Stay on topic: Make sure that you are posting to the correct channel and avoid off-topic discussions.
Remember when you update an issue or respond to an email you are potentially sending to a large number of people.
Please consider this before you update. Also remember that nobody likes spam.</p></li>
</ul>

<p>Full code of conduct is posted available <a href="https://github.com/MARKETProtocol/community/blob/master/guidelines/code-of-conduct.md">here</a>.</p>
<h2 id='engineering-weekly'>Engineering Weekly</h2>
<p>Once a week, we all get together to talk about the project.</p>

<p>In the Engineering Weekly meeting, the core engineering team and contributors check in to discuss the progress of the project, to call attention to particular items, to make announcements, or to seek discussion of a topic.</p>

<p>Everyone is welcome! Check <a href="https://github.com/MARKETProtocol/community/blob/master/docs/engineering-weekly.md">details here</a>.</p>

<p>And you can find the <a href="https://github.com/MARKETProtocol/community/tree/master/meeting-notes">notes from previous meetings here</a>.</p>
<h2 id='community-improvement'>Community Improvement</h2>
<p>MARKET Protocol is just as much about community as it is about our technology.</p>

<p>We need constant help in improving our documentation, building new tools to interface with our platform,
spreading the word to new users, helping new users getting setup and much more.</p>

<p>Please get in touch if you would like to help out. Our <code>general</code> channel on <a href="https://marketprotocol.io/discord">Discord</a> is a great place to
share ideas and volunteer to help.</p>
<h2 id='full-time-positions'>Full Time Positions</h2>
<p>MARKET Protocol occasionally hires developers for part time or full time positions.</p>

<p>We have a strong preference for hiring people who have already started contributing to the project.
If you want a full time position on our team, your best shot is to engage with our team and start contributing code.
It is very unlikely that we would offer you a full time position on our engineering
team unless you&#39;ve had at least a few pull requests merged.</p>
<h1 id='bug-reporting'>Bug Reporting</h1>
<p>If you find bugs, mistakes or inconsistencies, please let us know by filing an issue on 
<a href="https://github.com/MARKETProtocol/dapp/issues">GitHub</a> (see details bellow). We highly appreciate 
you taking the time to contributing to MARKET Protocol.</p>

<aside class="notice">
No bug is too small. Help us fix our tpyos!
</aside>

<p>We use <a href="https://github.com/MARKETProtocol/">GitHub</a> for many aspects of project management, 
including recording meeting notes, outstanding decisions, documenting requests, and filing bugs. 
Therefore, if you ever find a bug in any of our applications, please report it on GitHub. See details below.</p>
<h2 id='what-39-s-github'>What&#39;s GitHub?</h2>
<p>GitHub is a version control system, a place where developers store their code. It&#39;s the place where 
our community stores all the code for our entire project.</p>

<p>GitHub allows groups of developers to collaborate on the same documents (often source code) 
simultaneously and without overriding each other’s work.</p>
<h2 id='create-a-github-account'>Create a GitHub account</h2>
<p>In order to report your findings on GitHub, you need to have a GitHub account. 
If you don&#39;t have one yet, you can easily sign up for one for free.</p>

<p>Please, see: <a href="https://help.github.com/articles/signing-up-for-a-new-github-account/">Signing up for a new GitHub account</a></p>
<h2 id='creating-a-bug-report'>Creating a Bug Report</h2>
<p>To report a bug related to MARKET Protocol applications, please <a href="https://github.com/MARKETProtocol/dapp/issues">create an issue in our GitHub</a>.</p>

<p>In our GitHub repositories, issues can be created by anyone and are then moderated by our core collaborators.</p>

<p>To create a new issue in our GitHub <a href="https://github.com/MARKETProtocol/dapp/issues/new">click on this link</a>, 
or you <a href="https://github.com/MARKETProtocol/dapp/issues/">view existing issues</a> and click on the <code>New Issue</code> 
button to add yours.</p>

<p>If you are able, please help us by creating the issue in the correct sub project, using the links below.</p>

<ul>
<li><a href="https://github.com/MARKETProtocol/docs/issues">Docs issues</a></li>
<li><a href="https://github.com/MARKETProtocol/MARKETProtocol/issues">MARKET Protocol issues (Solidity)</a></li>
<li><a href="https://github.com/MARKETProtocol/MARKET.js/issues">MARKET.js</a></li>
<li><a href="https://github.com/MARKETProtocol/dApp/issues">dApp issues</a></li>
<li><a href="https://github.com/MARKETProtocol/website/issues">Main website issues</a></li>
</ul>
<h3 id='when-filing-a-new-bug-please-include'>When filing a new bug, please include:</h3>
<ul>
<li>A descriptive and clear title. Use keywords.</li>
<li>Steps to trigger the problem that are specific, and repeatable.</li>
<li>What happens when you follow the steps.</li>
<li>What you expected to happen instead.</li>
<li>Include the exact text of any error messages if applicable.</li>
<li>Upload screenshots if possible.</li>
</ul>

<p>See also: <a href="https://help.github.com/articles/creating-an-issue/">Creating an issue</a></p>
<h2 id='security-issues'>Security Issues</h2>
<p>The MARKET Protocol and its implementations are still in early development, which means there may be problems with the
protocol or in our implementations. We take security vulnerabilities very seriously. If you discover a security issue,
please bring it to our attention right away!</p>

<p>If you find a vulnerability please send your report privately to <a href="mailto:support@marketprotocol.io">support@marketprotocol.io</a> Please DO NOT file a public issue.</p>

<p>If the issue is a protocol weakness or something not yet deployed, feel free to discuss it openly.</p>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
